<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC Builder Tycoon</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDREMDMwMUU4QzBBMTFFQ0FGRkRCQjY4M0I5RjREQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDREMDMwMUY4QzBBMTFFQ0FGRkRCQjY4M0I5RjREQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENEQwMzAxQzhDMEExMUVDQUZGREJCNjgzQjlGNERCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENEQwMzAxRDhDMEExMUVDQUZGREJCNjgzQjlGNERCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAgACAAAAT/EMhJq7046827/2AojmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpvP6LR6zW673/C4fE6v2+/4vH7P7/v/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubq7vL2+v8DBwsPExcbHyMnKy8zNzs/Q0dLT1NXW19jZ2tvc3d7f4OHi4+Tl5ufo6err7O3u7/Dx8vP09fb3+Pn6+/z9/v8AAwocSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzZs4c+rcybOnz59AgwodSrSo0aNIkypdyrSp06dQo0qdSrWq1atYs2rdyrWr169gw4odS7as2bNo06pdy7at27dw48qdS7eu3bt48+rdy7ev37+AAwseTLiw4cOIEytezPixY8eGI0ue/BizZcqYMWvezLmzZ8+gQ4seTbq06dOoU6tezbq169ewY8ueTbu27du4c+vezbu379/AgwsfTry48ePIkytfzry58+fQo0ufTr269evYs2vfzr279+/gw4sfT768+fPo06tfz769+/fw48ufT7++/fv48+vfz7+///8ABijggAQWaOCBCCao4IIMNujggxBGKOGEFFZo4YUYZqjhhhx26OGHIIYo4ogklmjiiSimqOKKLLbo4oswxijjjDTWaOONOOao44489ujjj0AGKeSQRBZp5JFIJqnkkkw26eSTUEYp5ZRUVmnllVhmqeWWXHbp5ZdghinmmGSWaeaZaKap5ppstunmm3DGKeecdNZp55145qnnnnz26eefgAYq6KCEFmrooYgmquiijDbq6KOQRirppJRWaumlmGaq6aacdurpp6CGKuqopJZq6qmopqrqqqy26uqrsMYq66y01mrrrbjmquuuvPbq66/ABivssMQWa+yxyCar7LLMNuvss9BGK+201FZr7bXYZqvtttx26+234IYr7rjklmvuueimq+667Lbr7rvwxivvvPTWa++9+Oar77789uvvvwAHLPDABBds8MEIJ6zwwgw37PDDEEcs8cQUV2zxxRhnrPHGHHfs8ccghyzyyCSXbPLJKKes8sost+zyyzDHLPPMNNds880456zzzjz37PPPQAct9NBEF2300UgnrfTSTDft9NNQRy311FRXbfXVWGet9dZcd+3112CHLfbYZJdt9tlop6322my37fbbcMct99x012333XjnrffefPft99+ABy744IQXbvjhiCeu+OKMN+7445BHLvnklFdu+eWYZ6755px37vnnoIcu+uiklz767KSXbvrpqJNeeumop87666y77vrrsLfu+uu0wy777LTbfjv/7bjz7vvvwgdPfPHIJ8988s477/z00Fev/fbef+/99+CX7/778Jdv//3896///wAcIIELREACE5jABi5QgQ50IAQnWEEJYrCCFdSgBjfIwQ8G8IIiPKEIUYjCFaawgvwL4QpfGEMZzrCGN8RhDnfIwx/68IdELKIRk4jEJi5RiU50IhShGEUpVrGKV9RiFrf4xTCW0YxpVKMa3+hGOMZRjnO04x3ziEc97rGPfeRjHv/4R0AOUpCFNCQiE6lIRi5SkYt0JCQhGUlKVrKSkYRkJC05SUtespOZ1KQnP+nJUIZSlKMkZSlPmUpUprKVrkzlK2EZS1nOkpa1tKUtb4lLXe6Sl7v05S+BWUxhFrOYxkSmMpfJTGY605nPhKY0p0lNalpTm9XEZja32U1venOc3OymNr/pTXCOk5zkLKc5zYnOdKZzne1sJzzbGU94xjOe8pynPOdJz3ra85747Kc9+0nPftrzn/j8JT8DSk+BCrSgAyUoQQ1aTYAm1KIKRShDI0pRjXJUoxr1aEhHWlKSmrSkHiUpSkFKUpWm1KUshWlLZUrTmcqUpja1aU5tqlOe8rSnPv0pUIEa1KAK9ahCTapRk4pUpS5VqUxl6lKZ2lSnOrWpT4Uq/1Sj+tSpUoUqVadK1ala9apYzapWtcpVrnrVq2AVq1nNqlbFala1utWtdtWrX/0qWMEa1rCKdaxkLatZz4pWtapVrWxlq1vdCle4xjWucpVrXedK17ra9a54zatd8/pXvO5Vr3vl6179ylfAAhawggUsYQEbWMAadq6ITaxiF8tYxjrWsZCNrGQnS9nKWvaymM2sZjfL2c569rOgDa1oR0va0pr2tKhNrWpXy9rWuva1sI2tbGdL29ra9rawfS1tb/va2OpWt7ytLW9529vbAvS3wd0tcH9L3N8iF7jKdS5ynSvd51YAAN7AA==">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #242424;
            --bg-card: #2a2a2a;
            --accent-primary: #3b82f6;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --border: #404040;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        h1 {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            flex: 1;
            max-width: 600px;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px 16px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.3em;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .lang-switch {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px 16px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 0.9em;
            cursor: pointer;
        }

        .lang-switch:hover {
            background: var(--bg-primary);
            border-color: var(--accent-primary);
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 968px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .card-title {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        /* Click Area */
        .click-area {
            text-align: center;
            padding: 40px 30px;
            background: var(--bg-card);
            border-radius: 8px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .click-button {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(145deg, #4a90ff 0%, #2563eb 50%, #1d4ed8 100%);
            border: 4px solid rgba(255, 255, 255, 0.1);
            font-size: 2em;
            font-weight: 900;
            letter-spacing: 2px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 
                0 8px 20px rgba(37, 99, 235, 0.4),
                0 4px 8px rgba(0, 0, 0, 0.3),
                inset 0 -4px 12px rgba(0, 0, 0, 0.3),
                inset 0 4px 12px rgba(255, 255, 255, 0.15);
            position: relative;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .click-button::before {
            content: '';
            position: absolute;
            top: 8%;
            left: 15%;
            width: 40%;
            height: 30%;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            filter: blur(8px);
        }

        .click-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 
                0 12px 28px rgba(37, 99, 235, 0.5),
                0 6px 12px rgba(0, 0, 0, 0.4),
                inset 0 -4px 12px rgba(0, 0, 0, 0.3),
                inset 0 4px 12px rgba(255, 255, 255, 0.2);
        }

        .click-button:active {
            transform: translateY(1px) scale(0.98);
            box-shadow: 
                0 4px 12px rgba(37, 99, 235, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.3),
                inset 0 -2px 8px rgba(0, 0, 0, 0.4),
                inset 0 2px 8px rgba(255, 255, 255, 0.1);
        }

        .click-stats-group {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .click-stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .click-stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .click-value {
            font-size: 1.3em;
            color: var(--accent-success);
            font-weight: 700;
        }

        .temp-display {
            font-size: 1.3em;
            font-weight: 700;
        }

        .temp-normal { color: #10b981; }
        .temp-warm { color: #f59e0b; }
        .temp-hot { color: #ef4444; }
        .temp-critical { color: #dc2626; animation: pulse 1s infinite; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .power-warning {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #ef4444;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 600;
            animation: pulse 1.5s infinite;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 0;
        }

        .tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            color: var(--text-secondary);
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Lists */
        .item-list {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 8px;
        }

        .item-list::-webkit-scrollbar {
            width: 6px;
        }

        .item-list::-webkit-scrollbar-track {
            background: var(--bg-card);
            border-radius: 3px;
        }

        .item-list::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .item-list::-webkit-scrollbar-thumb:hover {
            background: var(--accent-primary);
        }

        .item {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 14px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }

        .item:hover {
            border-color: var(--accent-primary);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .item-name {
            font-size: 1em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .item-level {
            font-size: 0.85em;
            color: var(--text-secondary);
            background: var(--bg-primary);
            padding: 3px 8px;
            border-radius: 4px;
        }

        .item-stats {
            display: flex;
            gap: 12px;
            margin-bottom: 10px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .item-stat {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Inter', sans-serif;
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #2563eb;
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover:not(:disabled) {
            background: #dc2626;
        }

        .btn-warning {
            background: #f59e0b;
            color: white;
        }

        .btn-warning:hover:not(:disabled) {
            background: #d97706;
        }

        .overclock-section {
            background: rgba(239, 68, 68, 0.05);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 6px;
            padding: 12px;
            margin-top: 10px;
        }

        .overclock-section h4 {
            color: #ef4444;
            font-size: 0.9em;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .efficiency-meter {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 8px 12px;
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85em;
        }

        .efficiency-value {
            font-weight: 700;
            color: var(--accent-success);
        }

        .efficiency-low { color: #ef4444; }
        .efficiency-medium { color: #f59e0b; }
        .efficiency-high { color: #10b981; }

        .system-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .system-stat {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
        }

        .system-stat-label {
            font-size: 0.7em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .system-stat-value {
            font-size: 1.1em;
            font-weight: 700;
        }

        .warning-banner {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
            padding: 10px 12px;
            margin-top: 12px;
            border-radius: 4px;
            font-size: 0.85em;
            color: #ef4444;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* News Ticker */
        .news-ticker {
            background: linear-gradient(90deg, #1a1a1a, #242424);
            border-bottom: 2px solid var(--accent-primary);
            padding: 8px 0;
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
        }

        .news-ticker-content {
            display: flex;
            align-items: center;
            gap: 50px;
            animation: scroll 30s linear infinite;
            white-space: nowrap;
        }

        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .news-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9em;
        }

        .news-icon {
            color: var(--accent-warning);
        }

        .news-text {
            color: var(--text-primary);
        }

        .news-positive { color: var(--accent-success); }
        .news-negative { color: #ef4444; }

        /* Black Market */
        .black-market-header {
            background: linear-gradient(135deg, #1a1a1a, #2d0a0a);
            border: 2px solid #ef4444;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .black-market-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.1), transparent);
            animation: shine 2s infinite;
        }

        .black-market-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2em;
            font-weight: 700;
            color: #ef4444;
            margin-bottom: 8px;
        }

        .black-market-warning {
            font-size: 0.85em;
            color: var(--text-secondary);
            font-style: italic;
        }

        .marketplace-item.black-market {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.05), rgba(139, 92, 246, 0.05));
            border: 1px solid rgba(239, 68, 68, 0.3);
            position: relative;
        }

        .marketplace-item.black-market::before {
            content: '⚠️ RISK';
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 0.65em;
            background: #ef4444;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 700;
        }

        .discount-badge {
            background: #ef4444;
            color: white;
            font-size: 0.75em;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            margin: 5px 0;
        }

        .quality-badge {
            font-size: 0.7em;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: 600;
            margin-top: 5px;
        }

        .quality-authentic {
            background: var(--accent-success);
            color: white;
        }

        .quality-refurbished {
            background: var(--accent-warning);
            color: var(--bg-primary);
        }

        .quality-fake {
            background: #ef4444;
            color: white;
        }

        .price-change {
            font-size: 0.75em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 3px;
            margin-top: 3px;
        }

        .price-up {
            color: #ef4444;
        }

        .price-down {
            color: var(--accent-success);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }

        .toast {
            background: rgba(20, 20, 20, 0.95);
            border-left: 4px solid;
            padding: 15px 20px;
            border-radius: 6px;
            color: var(--text-primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease, slideOut 0.3s ease 1.7s;
            cursor: pointer;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .toast.success { border-left-color: #10b981; }
        .toast.warning { border-left-color: #f59e0b; }
        .toast.error { border-left-color: #ef4444; }
        .toast.info { border-left-color: #3b82f6; }

        .toast-title {
            font-weight: 700;
            font-size: 0.95em;
            margin-bottom: 5px;
        }

        .toast-message {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        /* BSOD Screen */
        .bsod-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0078d7;
            color: white;
            z-index: 99999;
            display: flex;
            flex-direction: column;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            padding: 80px 100px;
        }

        .bsod-content {
            flex: 1;
        }

        .bsod-sad {
            font-size: 8em;
            margin-bottom: 40px;
        }

        .bsod-title {
            font-size: 2.5em;
            font-weight: 400;
            margin-bottom: 30px;
        }

        .bsod-text {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .bsod-progress {
            font-size: 1.5em;
            margin-top: 30px;
        }

        .bsod-footer {
            display: flex;
            gap: 30px;
            font-size: 0.9em;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
        }

        .bsod-link {
            color: white;
            text-decoration: none;
            opacity: 0.8;
        }

        .bsod-link:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .sell-button {
            background: var(--accent-warning);
            color: var(--bg-primary);
            font-size: 0.8em;
            padding: 4px 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            margin-top: 5px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .sell-button:hover {
            background: #d97706;
            transform: scale(1.05);
        }

        .compatibility-warning {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #ef4444;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 0.75em;
            margin-top: 5px;
            font-weight: 600;
        }

        /* 3-Dot Menu for Inventory */
        .item-menu {
            position: absolute;
            top: 6px;
            right: 6px;
            z-index: 10;
        }

        .menu-button {
            background: transparent;
            border: 1px solid var(--accent-success);
            color: var(--accent-success);
            width: 22px;
            height: 22px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            transition: all 0.2s ease;
            opacity: 0.7;
        }

        .menu-button:hover {
            background: rgba(16, 185, 129, 0.1);
            opacity: 1;
        }

        .menu-dropdown {
            position: absolute;
            top: 28px;
            right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            min-width: 110px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 100;
        }

        .menu-dropdown.active {
            display: block;
        }

        .menu-item {
            padding: 8px 12px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85em;
        }

        .menu-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-primary);
        }

        .menu-item.sell-item {
            color: var(--accent-warning);
        }

        .menu-item.sell-item:hover {
            background: rgba(245, 158, 11, 0.1);
        }

        .inventory-item {
            position: relative;
        }

        .reset-section {
            background: linear-gradient(135deg, #2d0a0a, #1a0a0a);
            border: 2px solid #ef4444;
            border-radius: 8px;
            padding: 15px 20px;
            margin-top: 15px;
        }

        .reset-title {
            color: #ef4444;
            font-weight: 700;
            font-size: 0.9em;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .reset-info {
            font-size: 0.8em;
            color: var(--text-secondary);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .reset-cooldown {
            color: var(--accent-warning);
            font-size: 0.75em;
            margin-bottom: 10px;
        }

        .btn-reset {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-reset:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
        }

        .btn-reset:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .power-reset-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(145deg, #ef4444, #dc2626);
            border: none;
            color: white;
            font-size: 1.4em;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 8px rgba(0, 0, 0, 0.3),
                0 2px 4px rgba(0, 0, 0, 0.2),
                inset 0 -3px 6px rgba(0, 0, 0, 0.4),
                inset 0 2px 6px rgba(255, 255, 255, 0.3);
        }

        .power-reset-btn::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 10px;
            width: 18px;
            height: 15px;
            background: linear-gradient(135deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            filter: blur(3px);
        }

        .power-reset-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 12px rgba(239, 68, 68, 0.4),
                0 3px 6px rgba(0, 0, 0, 0.3),
                inset 0 -3px 6px rgba(0, 0, 0, 0.4),
                inset 0 2px 8px rgba(255, 255, 255, 0.4);
            background: linear-gradient(145deg, #f87171, #ef4444);
        }

        .power-reset-btn:active:not(:disabled) {
            transform: translateY(1px);
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.3),
                inset 0 -2px 4px rgba(0, 0, 0, 0.5),
                inset 0 1px 4px rgba(255, 255, 255, 0.2);
        }

        .power-reset-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            filter: grayscale(0.5);
        }

        .sound-btn {
            background: linear-gradient(145deg, #6b7280, #4b5563) !important;
        }

        .sound-btn::before {
            background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%) !important;
        }

        .sound-btn:hover:not(:disabled) {
            background: linear-gradient(145deg, #9ca3af, #6b7280) !important;
            box-shadow: 
                0 6px 12px rgba(107, 114, 128, 0.4),
                0 3px 6px rgba(0, 0, 0, 0.3),
                inset 0 -3px 6px rgba(0, 0, 0, 0.4),
                inset 0 2px 8px rgba(255, 255, 255, 0.4) !important;
        }

        .reset-tooltip {
            position: absolute;
            top: 70px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.75em;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            cursor: move;
            user-select: none;
            z-index: 100;
        }

        .reset-tooltip:hover {
            background: rgba(0, 0, 0, 0.95);
        }

        .header-content {
            position: relative;
        }

        .tax-display {
            color: #ef4444;
            font-weight: 600;
        }

        /* Marketplace Grid */
        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 8px;
        }

        .marketplace-item {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 12px;
            text-align: center;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
        }

        .marketplace-item:hover {
            border-color: var(--accent-primary);
        }

        .marketplace-item.owned {
            border-color: var(--accent-success);
            background: rgba(16, 185, 129, 0.05);
        }

        .item-image {
            width: 100%;
            height: 120px;
            object-fit: contain;
            margin-bottom: 10px;
            background: var(--bg-primary);
            border-radius: 4px;
        }

        .item-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-primary);
            border-radius: 4px;
        }

        .item-category-badge {
            font-size: 0.7em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .marketplace-item .item-name {
            font-size: 0.85em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            min-height: 32px;
            line-height: 1.3;
        }

        .item-price {
            color: var(--accent-warning);
            font-weight: 700;
            font-size: 1em;
            margin: 8px 0;
        }

        .item-boost {
            color: var(--accent-success);
            font-size: 0.8em;
            margin-bottom: 10px;
        }

        .search-box {
            width: 100%;
            padding: 10px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 0.9em;
            margin-bottom: 12px;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .category-filter {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 6px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-secondary);
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .category-btn:hover {
            border-color: var(--accent-primary);
            color: var(--text-primary);
        }

        .category-btn.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .sort-filter {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            align-items: center;
        }

        .sort-filter label {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .sort-select {
            padding: 6px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 0.85em;
            cursor: pointer;
        }

        /* Inventory */
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
        }

        .inventory-item {
            background: var(--bg-card);
            border: 1px solid var(--accent-success);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
        }

        .float-number {
            position: fixed;
            pointer-events: none;
            font-weight: 700;
            font-size: 1.3em;
            color: var(--accent-success);
            animation: floatUp 1s ease-out forwards;
            z-index: 1000;
        }

        @keyframes floatUp {
            to {
                transform: translateY(-80px);
                opacity: 0;
            }
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--bg-card);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 6px;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-primary);
            transition: width 0.3s ease;
        }

        .device-select-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            z-index: 100000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .device-select-container {
            text-align: center;
            max-width: 600px;
            padding: 40px;
        }

        .device-select-title {
            font-size: 3em;
            font-weight: 900;
            color: var(--accent-primary);
            margin-bottom: 10px;
            text-shadow: 0 2px 8px rgba(59, 130, 246, 0.5);
        }

        .device-select-subtitle {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 50px;
        }

        .device-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .device-btn {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 40px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            font-family: 'Inter', sans-serif;
        }

        .device-btn:hover {
            border-color: var(--accent-primary);
            background: rgba(59, 130, 246, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }

        .device-btn i {
            font-size: 4em;
            color: var(--accent-primary);
        }

        .device-btn span {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .device-desc {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        body.mobile-mode .container {
            max-width: 100%;
            padding: 10px;
        }

        body.mobile-mode .main-grid {
            grid-template-columns: 1fr;
        }

        body.mobile-mode .stats-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        body.mobile-mode .stat-card {
            padding: 8px;
        }

        body.mobile-mode .stat-label {
            font-size: 0.65em;
        }

        body.mobile-mode .stat-value {
            font-size: 1em;
        }

        body.mobile-mode h1 {
            font-size: 1.2em;
        }

        body.mobile-mode .header-content {
            flex-direction: column;
            gap: 10px;
        }

        body.mobile-mode .click-button {
            width: 150px;
            height: 150px;
            font-size: 1.5em;
        }

        body.mobile-mode .marketplace-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        body.mobile-mode .inventory-grid {
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        body.mobile-mode .card {
            padding: 12px;
        }

        body.mobile-mode .card-title {
            font-size: 1.1em;
        }

        body.mobile-mode .news-ticker {
            font-size: 0.8em;
        }

        body.mobile-mode .power-reset-btn {
            width: 40px;
            height: 40px;
            font-size: 1.1em;
        }

        body.mobile-mode .reset-tooltip {
            font-size: 0.65em;
            top: 55px;
            right: 10px;
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        .game-footer {
            margin-top: 40px;
            padding: 30px 20px;
            border-top: 1px solid var(--border);
            text-align: center;
        }

        .footer-links {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9em;
            transition: color 0.2s ease;
        }

        .footer-link:hover {
            color: var(--accent-primary);
            text-decoration: underline;
        }

        .footer-separator {
            color: var(--text-secondary);
            opacity: 0.5;
        }

        .footer-copyright {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        .policy-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 99999;
            overflow: auto;
            padding: 20px;
        }

        .policy-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            max-width: 800px;
            margin: 40px auto;
            padding: 40px;
            position: relative;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .policy-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 2em;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .policy-close:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .policy-content h1 {
            color: var(--accent-primary);
            font-size: 2em;
            margin-bottom: 10px;
        }

        .policy-content h2 {
            color: var(--text-primary);
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .policy-content p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .policy-content ul {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .policy-content strong {
            color: var(--text-primary);
        }

        .policy-updated {
            color: var(--text-secondary);
            font-size: 0.9em;
            font-style: italic;
            margin-bottom: 30px;
        }

        body.mobile-mode .policy-content {
            padding: 20px;
            margin: 20px auto;
        }

        body.mobile-mode .policy-content h1 {
            font-size: 1.5em;
        }

        body.mobile-mode .policy-content h2 {
            font-size: 1.2em;
        }

        .project-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 30px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .project-card:hover:not(.project-disabled) {
            border-color: var(--accent-primary);
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
        }

        .project-disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .project-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .project-title {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .project-desc {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 15px;
            min-height: 60px;
        }

        .project-tags {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .project-tag {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-primary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .project-btn {
            background: linear-gradient(135deg, var(--accent-primary), #2563eb);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            width: 100%;
        }

        .project-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .project-btn i {
            margin-right: 8px;
        }

        .home-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.95em;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .home-link:hover {
            color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .home-link i {
            font-size: 1.1em;
        }

        .topup-warning {
            background: rgba(245, 158, 11, 0.1);
            border: 2px solid var(--accent-warning);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--accent-warning);
        }

        .topup-warning i {
            font-size: 1.5em;
        }

        .topup-warning p {
            margin: 0;
            font-weight: 600;
        }

        .topup-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .topup-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topup-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .topup-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .topup-method {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .topup-amount {
            font-size: 1.5em;
            font-weight: 900;
            color: var(--accent-success);
            margin-bottom: 5px;
        }

        .topup-price {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .topup-bonus {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            font-size: 0.75em;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 12px;
        }

        .btn-topup {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
        }

        .btn-topup:hover {
            background: #2563eb;
            transform: scale(1.05);
        }

        .scam-badge {
            background: #ef4444;
            color: white;
            font-size: 0.7em;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 3px;
            margin-left: 5px;
        }

        .advanced-stats-section {
            margin-top: 15px;
            padding: 12px;
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 6px;
        }

        .advanced-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .advanced-stat {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 0.85em;
        }

        .advanced-stat i {
            font-size: 1.2em;
            color: var(--accent-primary);
            width: 20px;
        }

        .advanced-stat span {
            flex: 1;
            color: var(--text-primary);
            font-weight: 600;
        }

        .stat-toggle {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }

        .stat-toggle:hover {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        .stat-toggle.active {
            background: var(--accent-success);
            border-color: var(--accent-success);
            color: white;
        }

        .battery-low {
            color: #ef4444 !important;
            animation: pulse 1s infinite;
        }

        .battery-charging {
            color: #10b981 !important;
        }

        .internet-offline {
            color: #ef4444 !important;
        }

        .virus-danger {
            color: #ef4444 !important;
            animation: pulse 1s infinite;
        }

        .mining-active {
            color: #f59e0b !important;
        }

        @media (max-width: 600px) {
            .device-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="device-select-screen" class="device-select-overlay">
        <div class="device-select-container">
            <h1 class="device-select-title">PC BUILDER TYCOON</h1>
            <p class="device-select-subtitle">Choose your device</p>
            <div class="device-options">
                <button class="device-btn desktop-btn" onclick="selectDevice('desktop')">
                    <i class="fa fa-desktop"></i>
                    <span>Laptop / PC</span>
                    <div class="device-desc">Full desktop experience</div>
                </button>
                <button class="device-btn mobile-btn" onclick="selectDevice('mobile')">
                    <i class="fa fa-mobile-screen"></i>
                    <span>Android</span>
                    <div class="device-desc">Optimized for portrait</div>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- News Ticker -->
        <div class="news-ticker" id="news-ticker-bar">
            <div class="news-ticker-content" id="news-ticker">
                <div class="news-item">
                    <i class="fa fa-newspaper news-icon"></i>
                    <span class="news-text">Loading market news...</span>
                </div>
            </div>
        </div>

        <header id="game-header">
            <div class="header-content">
                <h1 id="title">PC BUILDER TYCOON</h1>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label" id="label-money">Money</div>
                        <div class="stat-value" id="money">$0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label" id="label-income">$/Click</div>
                        <div class="stat-value" id="income-per-click">$0.001</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label" id="label-auto">$/Min</div>
                        <div class="stat-value" id="income-per-sec">$0.00/min</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Tax</div>
                        <div class="stat-value tax-display" id="tax-amount">-$0.00/s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label" id="label-level">Level</div>
                        <div class="stat-value" id="level">1</div>
                    </div>
                </div>
                <select class="lang-switch" id="lang-switch">
                    <option value="en">English</option>
                    <option value="vi">Tiếng Việt</option>
                </select>
                <button class="power-reset-btn" id="reset-btn" onclick="performReset()" title="Reset Game (1 per week)">
                    <i class="fa fa-power-off"></i>
                </button>
                <button class="power-reset-btn sound-btn" onclick="toggleSound()" title="Toggle Sound" style="right: 120px;">
                    <i class="fa fa-volume-high" id="sound-icon"></i>
                </button>
                <div class="reset-tooltip" id="reset-cooldown">Available</div>
            </div>
        </header>

        <div class="main-grid">
            <div class="card">
                <div class="card-title" id="card-work">WORK STATION</div>
                <div class="click-area">
                    <button class="click-button" id="click-btn">
                        <span id="btn-text">CLICK</span>
                    </button>
                    <div class="click-stats-group">
                        <div class="click-stat-item">
                            <div class="click-stat-label" id="label-per-click">Per Click</div>
                            <div class="click-value" id="click-value-text">$0.001</div>
                        </div>
                        <div class="click-stat-item">
                            <div class="click-stat-label" id="label-temp">Temperature</div>
                            <div class="temp-display temp-normal" id="temp-display">25°C</div>
                        </div>
                    </div>
                    <div id="power-warning" class="power-warning" style="display: none;">
                        <i class="fa fa-triangle-exclamation"></i> <span id="power-warning-text">POWER OVERLOAD!</span>
                    </div>
                </div>

                <div class="system-stats">
                    <div class="system-stat">
                        <div class="system-stat-label" id="label-power-usage">Power Usage</div>
                        <div class="system-stat-value" id="power-usage">0W</div>
                    </div>
                    <div class="system-stat">
                        <div class="system-stat-label" id="label-power-limit">PSU Capacity</div>
                        <div class="system-stat-value" id="power-limit">500W</div>
                    </div>
                    <div class="system-stat">
                        <div class="system-stat-label" id="label-cooling">Cooling Power</div>
                        <div class="system-stat-value" id="cooling-power">10°C/s</div>
                    </div>
                    <div class="system-stat">
                        <div class="system-stat-label" id="label-efficiency">Efficiency</div>
                        <div class="system-stat-value efficiency-value efficiency-high" id="efficiency">100%</div>
                    </div>
                </div>

                <div class="efficiency-meter">
                    <span id="label-electricity-cost">Electricity Cost</span>
                    <span style="color: var(--accent-warning); font-weight: 700;" id="electricity-cost">-$0.00/s</span>
                </div>

                <div class="advanced-stats-section">
                    <h4 style="font-size: 0.9em; color: var(--text-secondary); margin-bottom: 10px;">
                        <i class="fa fa-microchip"></i> SYSTEM STATUS
                    </h4>
                    <div class="advanced-stats">
                        <div class="advanced-stat">
                            <i class="fa fa-battery-three-quarters" id="battery-icon"></i>
                            <span id="battery-display">100%</span>
                            <button class="stat-toggle" id="charge-toggle" onclick="toggleCharging()" title="Toggle Charging">
                                <i class="fa fa-plug"></i>
                            </button>
                        </div>
                        <div class="advanced-stat">
                            <i class="fa fa-wifi"></i>
                            <span id="internet-display">100 Mbps</span>
                            <button class="stat-toggle" onclick="toggleInternet()" title="Toggle Internet">
                                <i class="fa fa-power-off"></i>
                            </button>
                        </div>
                        <div class="advanced-stat">
                            <i class="fa fa-shield-halved"></i>
                            <span id="virus-display">Safe</span>
                            <button class="stat-toggle" onclick="toggleAntivirus()" title="Toggle Antivirus">
                                <i class="fa fa-shield"></i>
                            </button>
                        </div>
                        <div class="advanced-stat">
                            <i class="fa fa-bitcoin"></i>
                            <span id="mining-display">Off</span>
                            <button class="stat-toggle" onclick="toggleMining()" title="Toggle GPU Mining">
                                <i class="fa fa-power-off"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="overclock-section">
                    <h4><i class="fa fa-fire"></i> <span id="label-overclock">OVERCLOCK ZONE</span></h4>
                    <p style="font-size: 0.8em; color: var(--text-secondary); margin-bottom: 10px;" id="overclock-desc">
                        +50% income but 2x heat generation. 5% chance of component failure!
                    </p>
                    <button class="btn btn-danger" id="overclock-btn" onclick="toggleOverclock()">
                        <i class="fa fa-bolt"></i> <span id="overclock-btn-text">ENABLE OVERCLOCK</span>
                    </button>
                </div>
                
                <div class="tabs">
                    <button class="tab active" data-tab="upgrades" id="tab-upgrades">Upgrades</button>
                    <button class="tab" data-tab="workers" id="tab-workers">Workers</button>
                    <button class="tab" data-tab="jobs" id="tab-jobs">Jobs</button>
                    <button class="tab" data-tab="topup" id="tab-topup">Top Up</button>
                </div>

                <div class="tab-content active" id="upgrades">
                    <div class="item-list" id="upgrades-list"></div>
                </div>

                <div class="tab-content" id="workers">
                    <div class="item-list" id="workers-list"></div>
                </div>

                <div class="tab-content" id="jobs">
                    <div class="item-list" id="jobs-list"></div>
                </div>

                <div class="tab-content" id="topup">
                    <div class="topup-warning">
                        <i class="fa fa-exclamation-triangle"></i>
                        <p>Simulation only - No real money involved!</p>
                    </div>
                    <div class="topup-grid" id="topup-grid"></div>
                </div>
            </div>

            <div class="card">
                <div class="card-title" id="card-market">MARKETPLACE</div>
                
                <!-- Black Market Header -->
                <div class="black-market-header" id="black-market-header" style="display: none;">
                    <div class="black-market-title">
                        <i class="fa fa-skull-crossbones"></i>
                        <span id="black-market-title">BLACK MARKET</span>
                    </div>
                </div>

                <input type="text" class="search-box" id="search-box" placeholder="Search items...">
                <div class="sort-filter">
                    <label id="sort-label">Sort by:</label>
                    <select class="sort-select" id="sort-select">
                        <option value="default">Default</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="newest">Newest Items</option>
                        <option value="boost-high">Boost: Highest</option>
                    </select>
                </div>
                <div class="category-filter" id="category-filter"></div>
                <div class="marketplace-grid" id="marketplace-grid"></div>
            </div>
        </div>

        <div class="card">
            <div class="card-title" id="card-inventory">MY INVENTORY</div>
            <div class="inventory-grid" id="inventory-grid"></div>
        </div>

        <footer class="game-footer">
            <div class="footer-links">
                <a href="#" class="footer-link" onclick="showPolicy('terms'); return false;">Terms of Service</a>
                <span class="footer-separator">•</span>
                <a href="#" class="footer-link" onclick="showPolicy('privacy'); return false;">Privacy Policy</a>
                <span class="footer-separator">•</span>
                <a href="#" class="footer-link" onclick="showPolicy('anticheat'); return false;">Anti-Cheat</a>
            </div>
            <div class="footer-copyright">© 2026 PC Builder Tycoon. All rights reserved.</div>
        </footer>
    </div>

    <div id="policy-modal" class="policy-modal">
        <div class="policy-content">
            <button class="policy-close" onclick="closePolicy()">×</button>
            <div id="policy-text"></div>
        </div>
    </div>

    <script>
        function selectDevice(type) {
            const overlay = document.getElementById('device-select-screen');
            if (type === 'mobile') {
                document.body.classList.add('mobile-mode');
            }
            overlay.style.animation = 'fadeOut 0.5s ease';
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 500);
        }

        const policyContent = {
            terms: `
                <h1>Terms of Service</h1>
                <p class="policy-updated">Last Updated: February 14, 2026</p>
                
                <h2>1. Acceptance of Terms</h2>
                <p>By accessing and playing PC Builder Tycoon, you agree to be bound by these Terms of Service. If you do not agree, please discontinue use immediately.</p>
                
                <h2>2. Game Rules</h2>
                <ul>
                    <li><strong>Fair Play:</strong> Players must not use cheats, exploits, or unauthorized modifications</li>
                    <li><strong>Account Responsibility:</strong> You are responsible for all activity on your account</li>
                    <li><strong>Reset Limits:</strong> Developer reset is limited to once per week per account</li>
                    <li><strong>Black Market:</strong> Purchases are final and results are random (30/50/20 odds)</li>
                </ul>
                
                <h2>3. Prohibited Activities</h2>
                <ul>
                    <li>Using automated scripts, bots, or macros</li>
                    <li>Manipulating game files or local storage</li>
                    <li>Exploiting bugs or glitches for unfair advantage</li>
                    <li>Sharing or selling accounts</li>
                </ul>
                
                <h2>4. Consequences</h2>
                <p>Violation of these terms may result in account reset, temporary suspension, or permanent ban at our discretion.</p>
                
                <h2>5. Changes to Terms</h2>
                <p>We reserve the right to modify these terms at any time. Continued use constitutes acceptance of updated terms.</p>
                
                <h2>6. Disclaimer</h2>
                <p>The game is provided "as is" without warranties. Virtual items and progress have no real-world value.</p>
            `,
            privacy: `
                <h1>Privacy Policy</h1>
                <p class="policy-updated">Last Updated: February 14, 2026</p>
                
                <h2>1. Information We Collect</h2>
                <p><strong>Local Storage:</strong> PC Builder Tycoon stores game progress locally in your browser using localStorage. This includes:</p>
                <ul>
                    <li>Game progress (money, level, items)</li>
                    <li>Settings (language preference)</li>
                    <li>Reset cooldown timestamp</li>
                </ul>
                
                <h2>2. Data Storage</h2>
                <p><strong>No Server Storage:</strong> All game data is stored <strong>only on your device</strong>. We do not collect, transmit, or store any personal information on external servers.</p>
                
                <h2>3. Third-Party Services</h2>
                <p>We use Font Awesome icons (CDN) and Google Fonts. These services may collect basic usage data according to their own privacy policies.</p>
                
                <h2>4. Cookies</h2>
                <p>We do not use cookies. Game data is stored via browser localStorage only.</p>
                
                <h2>5. Data Control</h2>
                <ul>
                    <li><strong>Access:</strong> You can view your data via browser DevTools (Application > Local Storage)</li>
                    <li><strong>Delete:</strong> Clear browser data or use in-game reset to remove all data</li>
                    <li><strong>Export:</strong> Not available (all data is local-only)</li>
                </ul>
                
                <h2>6. Children's Privacy</h2>
                <p>The game does not knowingly collect information from children under 13. No personal data is collected from any users.</p>
                
                <h2>7. Changes to Policy</h2>
                <p>Updates to this policy will be posted here with a new "Last Updated" date.</p>
            `,
            anticheat: `
                <h1>Anti-Cheat Policy</h1>
                <p class="policy-updated">Last Updated: February 14, 2026</p>
                
                <h2>1. Fair Play Commitment</h2>
                <p>PC Builder Tycoon is designed for legitimate gameplay. We employ multiple systems to detect and prevent cheating.</p>
                
                <h2>2. Prohibited Methods</h2>
                <ul>
                    <li><strong>LocalStorage Manipulation:</strong> Editing save data via browser DevTools</li>
                    <li><strong>Auto-Clickers:</strong> Using macros or scripts to automate clicking</li>
                    <li><strong>Time Manipulation:</strong> Changing system time to bypass cooldowns</li>
                    <li><strong>Memory Editing:</strong> Modifying game variables via console or extensions</li>
                    <li><strong>Code Injection:</strong> Running unauthorized scripts in browser console</li>
                </ul>
                
                <h2>3. Detection Systems</h2>
                <p>Our anti-cheat includes:</p>
                <ul>
                    <li>Integrity checks on game state values</li>
                    <li>Timestamp validation for cooldowns</li>
                    <li>Rate limiting on actions (clicking, purchases)</li>
                    <li>Anomaly detection for impossible values</li>
                </ul>
                
                <h2>4. Penalties</h2>
                <p><strong>First Offense:</strong> Warning + Progress reset<br>
                <strong>Second Offense:</strong> 7-day cooldown on all resets<br>
                <strong>Third Offense:</strong> Permanent game reset on load</p>
                
                <h2>5. False Positives</h2>
                <p>If you believe you were incorrectly flagged, you may clear your browser data and restart. Persistent flags indicate actual violations.</p>
                
                <h2>6. Reporting</h2>
                <p>To report suspected cheating or exploits, you may document the issue via browser screenshots. However, as this is a single-player game with no leaderboards, enforcement is primarily self-regulated.</p>
                
                <h2>7. Updates</h2>
                <p>Anti-cheat systems are continuously updated to address new exploit methods.</p>
            `
        };

        function showPolicy(type) {
            const modal = document.getElementById('policy-modal');
            const content = document.getElementById('policy-text');
            content.innerHTML = policyContent[type];
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closePolicy() {
            const modal = document.getElementById('policy-modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        document.getElementById('policy-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePolicy();
            }
        });

        function showLicense() {
            const modal = document.getElementById('policy-modal');
            const content = document.getElementById('policy-text');
            content.innerHTML = `
                <h1>License</h1>
                <p class="policy-updated">Last Updated: February 14, 2026</p>
                
                <h2>MIT License</h2>
                <p>Copyright (c) 2026 DonTRess Team</p>
                
                <p>Permission is hereby granted, free of charge, to any person obtaining a copy
                of this software and associated documentation files (the "Software"), to deal
                in the Software without restriction, including without limitation the rights
                to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                copies of the Software, and to permit persons to whom the Software is
                furnished to do so, subject to the following conditions:</p>
                
                <p>The above copyright notice and this permission notice shall be included in all
                copies or substantial portions of the Software.</p>
                
                <p><strong>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
                SOFTWARE.</strong></p>
                
                <h2>Third-Party Resources</h2>
                <ul>
                    <li><strong>Font Awesome:</strong> Icons licensed under Font Awesome Free License</li>
                    <li><strong>Google Fonts (Inter):</strong> Licensed under Open Font License</li>
                </ul>
                
                <h2>Game Content</h2>
                <p>All game mechanics, designs, and original content are property of DonTRess Team. 
                Component names and specifications are used for educational and entertainment purposes.</p>
            `;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function showContact() {
            const modal = document.getElementById('policy-modal');
            const content = document.getElementById('policy-text');
            content.innerHTML = `
                <h1>Contact Us</h1>
                <p class="policy-updated">Get in touch with DonTRess Team</p>
                
                <h2>Contact Information</h2>
                <p>We'd love to hear from you! Whether you have feedback, bug reports, or just want to say hello.</p>
                
                <div style="background: var(--bg-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h3 style="margin-bottom: 15px;"><i class="fa fa-envelope"></i> Email</h3>
                    <p style="font-size: 1.1em; color: var(--accent-primary);">contact@dontress.dev</p>
                </div>
                
                <div style="background: var(--bg-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h3 style="margin-bottom: 15px;"><i class="fa fa-bug"></i> Bug Reports</h3>
                    <p>Found a bug? Please include:</p>
                    <ul>
                        <li>Device type (Desktop/Mobile)</li>
                        <li>Browser version</li>
                        <li>Steps to reproduce</li>
                        <li>Screenshot if possible</li>
                    </ul>
                </div>
                
                <div style="background: var(--bg-card); padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h3 style="margin-bottom: 15px;"><i class="fa fa-lightbulb"></i> Feature Requests</h3>
                    <p>Have an idea for a new feature? We're always looking to improve our games based on player feedback!</p>
                </div>
                
                <h2>Social Media</h2>
                <p style="color: var(--text-secondary);">Coming soon! Follow us for updates on new games and features.</p>
                
                <h2>Response Time</h2>
                <p>We typically respond within 24-48 hours during business days.</p>
            `;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        let audioContext = null;
        const sounds = {
            mechanicalKeyboard: null,
            fanNoise: null,
            moneyTing: null,
            purchaseSound: null,
            overclockHum: null,
            componentExplosion: null,
            bsodStatic: null,
            virusAlert: null,
            chargingBeep: null
        };

        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playMechanicalKeyboard() {
            if (!gameState.soundEnabled || !audioContext) return;
            
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.type = 'square';
            osc.frequency.setValueAtTime(800 + Math.random() * 200, audioContext.currentTime);
            
            gain.gain.setValueAtTime(gameState.soundVolume * 0.1, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.05);
            
            osc.connect(gain);
            gain.connect(audioContext.destination);
            
            osc.start();
            osc.stop(audioContext.currentTime + 0.05);
        }

        function playFanNoise(intensity) {
            if (!gameState.soundEnabled || !audioContext || intensity === 0) return;
            
            if (sounds.fanNoise) {
                try {
                    sounds.fanNoise.gain.gain.value = Math.min(intensity * gameState.soundVolume * 0.15, 0.3);
                    sounds.fanNoise.filter.frequency.value = 100 + intensity * 50;
                } catch(e) {}
                return;
            }
            
            const bufferSize = 4096;
            const whiteNoise = audioContext.createScriptProcessor(bufferSize, 1, 1);
            const filter = audioContext.createBiquadFilter();
            const gain = audioContext.createGain();
            
            filter.type = 'lowpass';
            filter.frequency.value = 100 + intensity * 50;
            
            gain.gain.value = Math.min(intensity * gameState.soundVolume * 0.15, 0.3);
            
            whiteNoise.onaudioprocess = function(e) {
                const output = e.outputBuffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    output[i] = Math.random() * 2 - 1;
                }
            };
            
            whiteNoise.connect(filter);
            filter.connect(gain);
            gain.connect(audioContext.destination);
            
            sounds.fanNoise = { node: whiteNoise, filter: filter, gain: gain };
        }

        function stopFanNoise() {
            if (sounds.fanNoise) {
                try {
                    sounds.fanNoise.node.disconnect();
                    sounds.fanNoise.filter.disconnect();
                    sounds.fanNoise.gain.disconnect();
                } catch(e) {}
                sounds.fanNoise = null;
            }
        }

        function playMoneyTing() {
            if (!gameState.soundEnabled || !audioContext) return;
            
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioContext.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
            
            gain.gain.setValueAtTime(gameState.soundVolume * 0.3, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.2);
            
            osc.connect(gain);
            gain.connect(audioContext.destination);
            
            osc.start();
            osc.stop(audioContext.currentTime + 0.2);
        }

        function playPurchaseSound() {
            if (!gameState.soundEnabled || !audioContext) return;
            
            const osc1 = audioContext.createOscillator();
            const osc2 = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc1.type = 'sine';
            osc2.type = 'sine';
            osc1.frequency.setValueAtTime(500, audioContext.currentTime);
            osc2.frequency.setValueAtTime(700, audioContext.currentTime);
            
            gain.gain.setValueAtTime(gameState.soundVolume * 0.2, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.3);
            
            osc1.connect(gain);
            osc2.connect(gain);
            gain.connect(audioContext.destination);
            
            osc1.start();
            osc2.start();
            osc1.stop(audioContext.currentTime + 0.3);
            osc2.stop(audioContext.currentTime + 0.3);
        }

        function playExplosion() {
            if (!gameState.soundEnabled || !audioContext) return;
            
            const bufferSize = 4096;
            const explosion = audioContext.createScriptProcessor(bufferSize, 1, 1);
            const gain = audioContext.createGain();
            
            gain.gain.setValueAtTime(gameState.soundVolume * 0.5, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
            
            explosion.onaudioprocess = function(e) {
                const output = e.outputBuffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    output[i] = (Math.random() * 2 - 1) * Math.exp(-i / bufferSize * 3);
                }
            };
            
            explosion.connect(gain);
            gain.connect(audioContext.destination);
            
            setTimeout(() => {
                explosion.disconnect();
                gain.disconnect();
            }, 500);
        }

        function playBSOD() {
            if (!gameState.soundEnabled || !audioContext) return;
            
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(50, audioContext.currentTime);
            
            gain.gain.setValueAtTime(gameState.soundVolume * 0.15, audioContext.currentTime);
            gain.gain.linearRampToValueAtTime(0, audioContext.currentTime + 1);
            
            osc.connect(gain);
            gain.connect(audioContext.destination);
            
            osc.start();
            osc.stop(audioContext.currentTime + 1);
        }

        function playVirusAlert() {
            if (!gameState.soundEnabled || !audioContext) return;
            
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const osc = audioContext.createOscillator();
                    const gain = audioContext.createGain();
                    
                    osc.type = 'square';
                    osc.frequency.setValueAtTime(1000, audioContext.currentTime);
                    
                    gain.gain.setValueAtTime(gameState.soundVolume * 0.2, audioContext.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.1);
                    
                    osc.connect(gain);
                    gain.connect(audioContext.destination);
                    
                    osc.start();
                    osc.stop(audioContext.currentTime + 0.1);
                }, i * 150);
            }
        }

        function playChargingBeep() {
            if (!gameState.soundEnabled || !audioContext) return;
            
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.type = 'sine';
            osc.frequency.setValueAtTime(600, audioContext.currentTime);
            
            gain.gain.setValueAtTime(gameState.soundVolume * 0.15, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.15);
            
            osc.connect(gain);
            gain.connect(audioContext.destination);
            
            osc.start();
            osc.stop(audioContext.currentTime + 0.15);
        }

        function toggleSound() {
            gameState.soundEnabled = !gameState.soundEnabled;
            const icon = document.getElementById('sound-icon');
            if (icon) {
                icon.className = gameState.soundEnabled ? 'fa fa-volume-high' : 'fa fa-volume-xmark';
            }
            if (!gameState.soundEnabled) {
                stopFanNoise();
            }
            showToast('info', 'SOUND', gameState.soundEnabled ? 'Sound enabled' : 'Sound disabled');
        }

        function toggleCharging() {
            gameState.isCharging = !gameState.isCharging;
            const btn = document.getElementById('charge-toggle');
            if (gameState.isCharging) {
                btn.classList.add('active');
                playChargingBeep();
                showToast('info', 'CHARGING', 'Battery charging enabled');
            } else {
                btn.classList.remove('active');
                showToast('info', 'UNPLUGGED', 'Running on battery');
            }
        }

        function toggleInternet() {
            gameState.internetConnection = !gameState.internetConnection;
            if (!gameState.internetConnection) {
                showToast('warning', 'OFFLINE', 'Internet disconnected - Black Market unavailable!');
                if (gameState.showBlackMarket) {
                    gameState.showBlackMarket = false;
                    renderMarketplace();
                }
            } else {
                playChargingBeep();
                showToast('success', 'ONLINE', 'Internet connected');
            }
        }

        function toggleAntivirus() {
            gameState.antivirusActive = !gameState.antivirusActive;
            if (gameState.antivirusActive) {
                playChargingBeep();
                showToast('success', 'PROTECTED', 'Antivirus enabled - Virus risk reduced!');
            } else {
                showToast('warning', 'UNPROTECTED', 'Antivirus disabled - Higher virus risk!');
            }
        }

        function toggleMining() {
            const gpuCount = allMarketItems.filter(i => i.owned && i.category === 'gpu').length;
            
            if (gpuCount === 0) {
                showToast('error', 'NO GPU', 'Need GPU to start mining!');
                return;
            }
            
            gameState.gpuMining = !gameState.gpuMining;
            
            if (gameState.gpuMining) {
                gameState.miningIncome = gpuCount * 5;
                showToast('success', 'MINING STARTED', `+$${gameState.miningIncome}/s from crypto mining`);
            } else {
                gameState.miningIncome = 0;
                showToast('info', 'MINING STOPPED', 'Crypto mining disabled');
            }
        }

        function updateAdvancedSystems(deltaTime) {
            const fanIntensity = Math.max(0, (gameState.temperature - 40) / 60);
            if (fanIntensity > 0.1) {
                playFanNoise(fanIntensity);
            } else {
                stopFanNoise();
            }
            
            if (!gameState.isCharging && gameState.batteryLevel > 0) {
                const drainRate = gameState.batteryDrainRate;
                gameState.batteryLevel -= drainRate * deltaTime;
                gameState.batteryLevel = Math.max(0, gameState.batteryLevel);
                
                if (gameState.batteryLevel === 0) {
                    showToast('error', 'BATTERY DEAD', 'System shutting down!');
                    gameState.efficiency = 0;
                }
            } else if (gameState.isCharging && gameState.batteryLevel < 100) {
                gameState.batteryLevel += 2 * deltaTime;
                gameState.batteryLevel = Math.min(100, gameState.batteryLevel);
            }
            
            if (gameState.gpuMining) {
                gameState.money += gameState.miningIncome / 10;
                gameState.temperature += 0.5 * deltaTime;
            }
            
            if (!gameState.antivirusActive) {
                gameState.virusRisk += 0.1 * deltaTime;
                gameState.virusRisk = Math.min(100, gameState.virusRisk);
                
                if (gameState.virusRisk > 80 && Math.random() < 0.001) {
                    const loss = gameState.money * 0.1;
                    gameState.money -= loss;
                    gameState.virusRisk = 0;
                    playVirusAlert();
                    showToast('error', 'VIRUS ATTACK', `Lost ${formatMoney(loss)} to ransomware!`);
                }
            } else {
                gameState.virusRisk -= 1 * deltaTime;
                gameState.virusRisk = Math.max(0, gameState.virusRisk);
            }
            
            updateAdvancedStatsUI();
        }

        function updateAdvancedStatsUI() {
            const batteryIcon = document.getElementById('battery-icon');
            const batteryDisplay = document.getElementById('battery-display');
            const internetDisplay = document.getElementById('internet-display');
            const virusDisplay = document.getElementById('virus-display');
            const miningDisplay = document.getElementById('mining-display');
            
            if (batteryDisplay) {
                batteryDisplay.textContent = Math.round(gameState.batteryLevel) + '%';
                batteryDisplay.className = '';
                if (gameState.isCharging) {
                    batteryDisplay.classList.add('battery-charging');
                } else if (gameState.batteryLevel < 20) {
                    batteryDisplay.classList.add('battery-low');
                }
            }
            
            if (batteryIcon) {
                if (gameState.batteryLevel > 75) {
                    batteryIcon.className = 'fa fa-battery-full';
                } else if (gameState.batteryLevel > 50) {
                    batteryIcon.className = 'fa fa-battery-three-quarters';
                } else if (gameState.batteryLevel > 25) {
                    batteryIcon.className = 'fa fa-battery-half';
                } else if (gameState.batteryLevel > 10) {
                    batteryIcon.className = 'fa fa-battery-quarter';
                } else {
                    batteryIcon.className = 'fa fa-battery-empty';
                }
            }
            
            if (internetDisplay) {
                internetDisplay.textContent = gameState.internetConnection ? `${gameState.internetSpeed} Mbps` : 'Offline';
                internetDisplay.className = gameState.internetConnection ? '' : 'internet-offline';
            }
            
            if (virusDisplay) {
                if (gameState.virusRisk > 50) {
                    virusDisplay.textContent = 'Danger';
                    virusDisplay.classList.add('virus-danger');
                } else if (gameState.virusRisk > 20) {
                    virusDisplay.textContent = 'Warning';
                } else {
                    virusDisplay.textContent = 'Safe';
                    virusDisplay.className = '';
                }
            }
            
            if (miningDisplay) {
                miningDisplay.textContent = gameState.gpuMining ? `+$${gameState.miningIncome}/s` : 'Off';
                miningDisplay.className = gameState.gpuMining ? 'mining-active' : '';
            }
        }

        const translations = {
            en: {
                title: 'PC BUILDER TYCOON',
                labelMoney: 'Money',
                labelIncome: '$/Click',
                labelAuto: '$/Sec',
                labelLevel: 'Level',
                cardWork: 'WORK STATION',
                cardMarket: 'MARKETPLACE',
                cardInventory: 'MY INVENTORY',
                btnText: 'CLICK',
                clickValue: '+${value} per click',
                labelPerClick: 'Per Click',
                labelTemp: 'Temperature',
                labelPowerUsage: 'Power Usage',
                labelPowerLimit: 'PSU Capacity',
                labelCooling: 'Cooling Power',
                labelEfficiency: 'Efficiency',
                labelElectricityCost: 'Electricity Cost',
                labelOverclock: 'OVERCLOCK ZONE',
                overclockDesc: '+50% income but 2x heat generation. 5% chance of component failure!',
                overclockBtnEnable: 'ENABLE OVERCLOCK',
                overclockBtnDisable: 'DISABLE OVERCLOCK',
                powerWarning: 'POWER OVERLOAD! Reduce components or upgrade PSU!',
                tabUpgrades: 'Upgrades',
                tabWorkers: 'Workers',
                tabJobs: 'Jobs',
                searchPlaceholder: 'Search items...',
                sortLabel: 'Sort by:',
                buy: 'BUY',
                hire: 'HIRE',
                unlock: 'UNLOCK',
                owned: 'OWNED',
                level: 'Lv',
                cost: 'Cost',
                boost: 'Boost',
                income: 'Income',
                producing: 'Producing',
                componentDamaged: 'COMPONENT DAMAGED!',
                blackMarket: 'BLACK MARKET',
                blackMarketWarning: '⚠️ Cheap goods with risks! 30% authentic, 50% refurbished, 20% fake will explode!',
                authentic: 'AUTHENTIC',
                refurbished: 'REFURBISHED',
                fake: 'FAKE SCAM',
                marketCrash: 'Market Crash',
                marketBoom: 'Market Boom',
                shortage: 'Component Shortage',
                newRelease: 'New Product Release',
                allItems: 'All',
                blackMarketItems: 'Black Market',
                sell: 'SELL'
            },
            vi: {
                title: 'ĐẾ CHẾ MÁY TÍNH',
                labelMoney: 'Tiền',
                labelIncome: '$/Click',
                labelAuto: '$/Giây',
                labelLevel: 'Cấp',
                cardWork: 'NƠI LÀM VIỆC',
                cardMarket: 'CHỢ PHỤ KIỆN',
                cardInventory: 'KHO ĐỒ',
                btnText: 'CLICK',
                clickValue: '+${value} mỗi click',
                labelPerClick: 'Mỗi Click',
                labelTemp: 'Nhiệt độ',
                labelPowerUsage: 'Điện tiêu thụ',
                labelPowerLimit: 'Nguồn tối đa',
                labelCooling: 'Tản nhiệt',
                labelEfficiency: 'Hiệu suất',
                labelElectricityCost: 'Tiền điện',
                labelOverclock: 'ÉP XUNG',
                overclockDesc: '+50% thu nhập nhưng tăng 2x nhiệt độ. 5% nguy cơ hỏng linh kiện!',
                overclockBtnEnable: 'BẬT ÉP XUNG',
                overclockBtnDisable: 'TẮT ÉP XUNG',
                powerWarning: 'QUÁ TẢI NGUỒN! Giảm linh kiện hoặc nâng cấp PSU!',
                tabUpgrades: 'Nâng cấp',
                tabWorkers: 'Nhân viên',
                tabJobs: 'Công việc',
                searchPlaceholder: 'Tìm kiếm...',
                sortLabel: 'Sắp xếp:',
                buy: 'MUA',
                hire: 'THUÊ',
                unlock: 'MỞ KHÓA',
                owned: 'ĐÃ MUA',
                level: 'Cấp',
                cost: 'Giá',
                boost: 'Tăng',
                income: 'Thu nhập',
                producing: 'Đang kiếm',
                componentDamaged: 'LINH KIỆN BỊ HỎNG!',
                blackMarket: 'CHỢ ĐEN',
                blackMarketWarning: '⚠️ Hàng giá rẻ bất ngờ! 30% hàng ngon, 50% hàng dựng, 20% hàng fake sẽ nổ!',
                authentic: 'HÀNG THẬT',
                refurbished: 'HÀNG DỰNG',
                fake: 'HÀNG GIẢ',
                marketCrash: 'Thị trường sụp đổ',
                marketBoom: 'Thị trường tăng giá',
                shortage: 'Thiếu hụt linh kiện',
                newRelease: 'Sản phẩm mới ra mắt',
                allItems: 'Tất cả',
                blackMarketItems: 'Chợ Đen',
                sell: 'BÁN'
            }
        };

        const gameState = {
            money: 100, // Start with $100
            incomePerClick: 0.1, // $0.10 per click
            incomePerSecond: 0,
            level: 1,
            exp: 0,
            expToLevel: 100,
            upgrades: {},
            workers: {},
            jobs: {},
            inventory: {},
            currentLang: 'en',
            currentSort: 'default',
            temperature: 25, // Current temperature in Celsius
            baseHeatGeneration: 0.1, // Heat per second from base operations
            coolingPower: 5, // Degrees cooled per second
            powerUsage: 0, // Current wattage usage
            powerLimit: 500, // PSU capacity in watts
            electricityRate: 0.0001, // $ per watt per second (10x higher than before!)
            efficiency: 1.0, // 0.0 to 1.0 multiplier on income
            isOverclocked: false,
            overclockMultiplier: 1.5,
            overclockHeatMultiplier: 2,
            overclockFailureChance: 0.05,
            priceMultipliers: {}, // Item ID -> price multiplier
            marketEvents: [],
            lastMarketUpdate: Date.now(),
            showBlackMarket: false,
            lastDisasterCheck: Date.now(),
            disasterCooldown: 60000, // 1 minute between disasters
            ramUsagePercent: 0,
            electricityMultiplier: 1.0, // News events can affect this
            totalElectricityCost: 0,
            batteryLevel: 100,
            isCharging: false,
            batteryDrainRate: 1,
            internetConnection: true,
            internetSpeed: 100,
            virusRisk: 0,
            antivirusActive: false,
            gpuMining: false,
            miningIncome: 0,
            cpuUsage: 0,
            ramUsage: 0,
            diskHealth: 100,
            fanSpeed: 0,
            soundEnabled: true,
            soundVolume: 0.5,
            currentBuild: {
                cpu: null,
                motherboard: null,
                ram: [],
                gpu: [],
                storage: [],
                psu: null,
                cooling: null,
                case: null
            },
            incompatibilityPenalty: 0 // $ lost per second due to incompatibility
        };

        const upgrades = [
            { id: 'mouse1', name: { en: 'Better Mouse', vi: 'Chuột tốt hơn' }, cost: 15, boost: 0.5, level: 0 },
            { id: 'keyboard1', name: { en: 'Mechanical Keyboard', vi: 'Bàn phím cơ' }, cost: 50, boost: 1, level: 0 },
            { id: 'monitor1', name: { en: 'Dual Monitor', vi: 'Màn hình đôi' }, cost: 200, boost: 3, level: 0 },
            { id: 'chair1', name: { en: 'Gaming Chair', vi: 'Ghế gaming' }, cost: 300, boost: 5, level: 0 },
            { id: 'desk1', name: { en: 'Standing Desk', vi: 'Bàn đứng' }, cost: 500, boost: 10, level: 0 },
            { id: 'pc1', name: { en: 'Gaming PC', vi: 'PC Gaming' }, cost: 1200, boost: 30, level: 0 },
            { id: 'server1', name: { en: 'Server Rack', vi: 'Tủ Server' }, cost: 5000, boost: 150, level: 0 }
        ];

        const workers = [
            { id: 'intern', name: { en: 'Intern', vi: 'Thực tập sinh' }, cost: 50, income: 1, count: 0 },
            { id: 'junior', name: { en: 'Junior Dev', vi: 'Dev mới' }, cost: 200, income: 5, count: 0 },
            { id: 'senior', name: { en: 'Senior Dev', vi: 'Dev senior' }, cost: 1000, income: 25, count: 0 },
            { id: 'manager', name: { en: 'Manager', vi: 'Quản lý' }, cost: 5000, income: 150, count: 0 },
            { id: 'cto', name: { en: 'CTO', vi: 'Giám đốc kỹ thuật' }, cost: 25000, income: 800, count: 0 }
        ];

        const jobs = [
            { id: 'support', name: { en: 'Tech Support', vi: 'Hỗ trợ kỹ thuật' }, cost: 100, unlock: 2, unlocked: false },
            { id: 'repair', name: { en: 'PC Repair', vi: 'Sửa máy tính' }, cost: 500, unlock: 10, unlocked: false },
            { id: 'build', name: { en: 'Custom Builds', vi: 'Ráp máy custom' }, cost: 2500, unlock: 50, unlocked: false },
            { id: 'datacenter', name: { en: 'Data Center', vi: 'Trung tâm dữ liệu' }, cost: 15000, unlock: 300, unlocked: false },
            { id: 'phishing', name: { en: 'Phishing Emails', vi: 'Email lừa đảo' }, cost: 50, unlock: 1, unlocked: false, scam: true },
            { id: 'fakeshop', name: { en: 'Fake Online Shop', vi: 'Shop fake' }, cost: 200, unlock: 5, unlocked: false, scam: true },
            { id: 'cryptoscam', name: { en: 'Crypto Scam', vi: 'Lừa đảo crypto' }, cost: 1000, unlock: 20, unlocked: false, scam: true },
            { id: 'romance', name: { en: 'Romance Scam', vi: 'Lừa tình' }, cost: 500, unlock: 10, unlocked: false, scam: true },
            { id: 'techsupport', name: { en: 'Fake Tech Support', vi: 'Giả support' }, cost: 300, unlock: 7, unlocked: false, scam: true },
            { id: 'ransomware', name: { en: 'Ransomware Dev', vi: 'Làm ransomware' }, cost: 5000, unlock: 100, unlocked: false, scam: true }
        ];

        const topupPackages = [
            { id: 'visa1', method: 'Visa/Mastercard', icon: 'fa-credit-card', amount: 1000, price: '$9.99', bonus: '+10%' },
            { id: 'visa2', method: 'Visa/Mastercard', icon: 'fa-credit-card', amount: 5000, price: '$49.99', bonus: '+20%' },
            { id: 'visa3', method: 'Visa/Mastercard', icon: 'fa-credit-card', amount: 10000, price: '$99.99', bonus: '+50%' },
            { id: 'bank1', method: 'Bank Transfer', icon: 'fa-building-columns', amount: 2000, price: '$19.99', bonus: '+15%' },
            { id: 'bank2', method: 'Bank Transfer', icon: 'fa-building-columns', amount: 8000, price: '$79.99', bonus: '+30%' },
            { id: 'momo1', method: 'Momo', icon: 'fa-mobile', amount: 500, price: '$4.99', bonus: '+5%' },
            { id: 'momo2', method: 'Momo', icon: 'fa-mobile', amount: 3000, price: '$29.99', bonus: '+10%' },
            { id: 'paypal1', method: 'PayPal', icon: 'fa-paypal', amount: 1500, price: '$14.99', bonus: '+12%' },
            { id: 'paypal2', method: 'PayPal', icon: 'fa-paypal', amount: 6000, price: '$59.99', bonus: '+25%' },
            { id: 'crypto1', method: 'Cryptocurrency', icon: 'fa-bitcoin', amount: 2500, price: '$24.99', bonus: '+18%' },
            { id: 'crypto2', method: 'Cryptocurrency', icon: 'fa-bitcoin', amount: 12000, price: '$119.99', bonus: '+40%' },
            { id: 'zalo1', method: 'ZaloPay', icon: 'fa-z', amount: 800, price: '$7.99', bonus: '+8%' }
        ];

        const categories = {
            cpu: { name: { en: 'CPU', vi: 'CPU' }, icon: 'fa-microchip' },
            gpu: { name: { en: 'GPU', vi: 'Card đồ họa' }, icon: 'fa-display' },
            ram: { name: { en: 'RAM', vi: 'RAM' }, icon: 'fa-memory' },
            storage: { name: { en: 'Storage', vi: 'Ổ cứng' }, icon: 'fa-hard-drive' },
            motherboard: { name: { en: 'Motherboard', vi: 'Bo mạch chủ' }, icon: 'fa-diagram-project' },
            psu: { name: { en: 'PSU', vi: 'Nguồn' }, icon: 'fa-plug' },
            cases: { name: { en: 'Case', vi: 'Vỏ case' }, icon: 'fa-box' },
            cooling: { name: { en: 'Cooling', vi: 'Tản nhiệt' }, icon: 'fa-fan' },
            monitors: { name: { en: 'Monitors', vi: 'Màn hình' }, icon: 'fa-desktop' },
            keyboards: { name: { en: 'Keyboards', vi: 'Bàn phím' }, icon: 'fa-keyboard' },
            mice: { name: { en: 'Mice', vi: 'Chuột' }, icon: 'fa-computer-mouse' },
            headsets: { name: { en: 'Headsets', vi: 'Tai nghe' }, icon: 'fa-headphones' },
            accessories: { name: { en: 'Accessories', vi: 'Phụ kiện' }, icon: 'fa-screwdriver-wrench' },
            chairs: { name: { en: 'Chairs', vi: 'Ghế' }, icon: 'fa-chair' },
            desks: { name: { en: 'Desks', vi: 'Bàn' }, icon: 'fa-table' }
        };

        const pcItemsDatabase = {
            cpu: [
                {n:'Intel Celeron G6900',p:0.05,b:0.01,i:'fa-microchip',y:2022,w:46},{n:'Intel Pentium Gold G7400',p:0.15,b:0.03,i:'fa-microchip',y:2022,w:46},{n:'Intel Core i3-12100',p:0.5,b:0.1,i:'fa-microchip',y:2022,w:60},{n:'Intel Core i3-13100',p:0.8,b:0.15,i:'fa-microchip',y:2023,w:60},{n:'Intel Core i3-14100',p:1.2,b:0.2,i:'fa-microchip',y:2024,w:60},{n:'Intel Core i5-12400',p:2.5,b:0.4,i:'fa-microchip',y:2022,w:65},{n:'Intel Core i5-12600K',p:4,b:0.6,i:'fa-microchip',y:2022,w:125},{n:'Intel Core i5-13400',p:5,b:0.75,i:'fa-microchip',y:2023,w:65},{n:'Intel Core i5-13600K',p:8,b:1.2,i:'fa-microchip',y:2023,w:125},{n:'Intel Core i5-14600K',p:12,b:1.8,i:'fa-microchip',y:2024,w:125},{n:'Intel Core i7-12700',p:15,b:2.5,i:'fa-microchip',y:2022,w:65},{n:'Intel Core i7-12700K',p:20,b:3.5,i:'fa-microchip',y:2022,w:125},{n:'Intel Core i7-13700K',p:30,b:5,i:'fa-microchip',y:2023,w:125},{n:'Intel Core i7-14700K',p:45,b:7.5,i:'fa-microchip',y:2024,w:125},{n:'Intel Core i9-12900K',p:60,b:10,i:'fa-microchip',y:2022,w:125},{n:'Intel Core i9-13900K',p:100,b:18,i:'fa-microchip',y:2023,w:125},{n:'Intel Core i9-14900K',p:150,b:28,i:'fa-microchip',y:2024,w:125},{n:'AMD Ryzen 3 4100',p:0.35,b:0.07,i:'fa-microchip',y:2022,w:65},{n:'AMD Ryzen 5 5500',p:1.5,b:0.3,i:'fa-microchip',y:2022,w:65},{n:'AMD Ryzen 5 5600',p:2.8,b:0.5,i:'fa-microchip',y:2022,w:65},{n:'AMD Ryzen 5 5600X',p:3.5,b:0.65,i:'fa-microchip',y:2020,w:65},{n:'AMD Ryzen 5 7600',p:8,b:1.3,i:'fa-microchip',y:2023,w:65},{n:'AMD Ryzen 5 7600X',p:11,b:1.8,i:'fa-microchip',y:2022,w:105},{n:'AMD Ryzen 7 5700X',p:7,b:1.1,i:'fa-microchip',y:2022,w:65},{n:'AMD Ryzen 7 5800X',p:10,b:1.6,i:'fa-microchip',y:2020,w:105},{n:'AMD Ryzen 7 5800X3D',p:18,b:3,i:'fa-microchip',y:2022,w:105},{n:'AMD Ryzen 7 7700X',p:25,b:4.5,i:'fa-microchip',y:2022,w:105},{n:'AMD Ryzen 7 7800X3D',p:55,b:9,i:'fa-microchip',y:2023,w:120},{n:'AMD Ryzen 9 5900X',p:22,b:3.8,i:'fa-microchip',y:2020,w:105},{n:'AMD Ryzen 9 5950X',p:35,b:6,i:'fa-microchip',y:2020,w:105},{n:'AMD Ryzen 9 7900X',p:65,b:11,i:'fa-microchip',y:2022,w:170},{n:'AMD Ryzen 9 7950X',p:120,b:22,i:'fa-microchip',y:2022,w:170},{n:'AMD Ryzen 9 7950X3D',p:180,b:35,i:'fa-microchip',y:2023,w:120},{n:'AMD Threadripper 7960X',p:500,b:100,i:'fa-microchip',y:2023,w:350},{n:'AMD Threadripper 7980X',p:1000,b:220,i:'fa-microchip',y:2023,w:350}
            ],
            gpu: [
                {n:'NVIDIA GT 1030',p:0.3,b:0.05,i:'fa-display',y:2017,w:30},{n:'NVIDIA GTX 1650',p:2,b:0.35,i:'fa-display',y:2019,w:75},{n:'NVIDIA GTX 1660',p:3.5,b:0.6,i:'fa-display',y:2019,w:120},{n:'NVIDIA GTX 1660 Super',p:4.5,b:0.8,i:'fa-display',y:2019,w:125},{n:'NVIDIA GTX 1660 Ti',p:5,b:0.9,i:'fa-display',y:2019,w:120},{n:'NVIDIA RTX 3050',p:6,b:1.1,i:'fa-display',y:2022,w:130},{n:'NVIDIA RTX 3060',p:12,b:2,i:'fa-display',y:2021,w:170},{n:'NVIDIA RTX 3060 Ti',p:18,b:3.2,i:'fa-display',y:2020,w:200},{n:'NVIDIA RTX 3070',p:28,b:5,i:'fa-display',y:2020,w:220},{n:'NVIDIA RTX 3070 Ti',p:35,b:6.5,i:'fa-display',y:2021,w:290},{n:'NVIDIA RTX 3080',p:50,b:9,i:'fa-display',y:2020,w:320},{n:'NVIDIA RTX 3080 Ti',p:65,b:12,i:'fa-display',y:2021,w:350},{n:'NVIDIA RTX 3090',p:90,b:17,i:'fa-display',y:2020,w:350},{n:'NVIDIA RTX 3090 Ti',p:110,b:21,i:'fa-display',y:2022,w:450},{n:'NVIDIA RTX 4060',p:16,b:2.8,i:'fa-display',y:2023,w:115},{n:'NVIDIA RTX 4060 Ti',p:25,b:4.5,i:'fa-display',y:2023,w:160},{n:'NVIDIA RTX 4070',p:40,b:7.5,i:'fa-display',y:2023,w:200},{n:'NVIDIA RTX 4070 Super',p:50,b:9.5,i:'fa-display',y:2024,w:220},{n:'NVIDIA RTX 4070 Ti',p:60,b:11.5,i:'fa-display',y:2023,w:285},{n:'NVIDIA RTX 4070 Ti Super',p:75,b:14,i:'fa-display',y:2024,w:285},{n:'NVIDIA RTX 4080',p:110,b:21,i:'fa-display',y:2022,w:320},{n:'NVIDIA RTX 4080 Super',p:130,b:25,i:'fa-display',y:2024,w:320},{n:'NVIDIA RTX 4090',p:200,b:40,i:'fa-display',y:2022,w:450},{n:'AMD RX 6500 XT',p:3,b:0.5,i:'fa-display',y:2022,w:107},{n:'AMD RX 6600',p:8,b:1.4,i:'fa-display',y:2021,w:132},{n:'AMD RX 6600 XT',p:12,b:2.1,i:'fa-display',y:2021,w:160},{n:'AMD RX 6700 XT',p:20,b:3.6,i:'fa-display',y:2021,w:230},{n:'AMD RX 6750 XT',p:24,b:4.3,i:'fa-display',y:2022,w:250},{n:'AMD RX 6800',p:32,b:5.8,i:'fa-display',y:2020,w:250},{n:'AMD RX 6800 XT',p:42,b:7.8,i:'fa-display',y:2020,w:300},{n:'AMD RX 6900 XT',p:55,b:10.5,i:'fa-display',y:2020,w:300},{n:'AMD RX 7600',p:14,b:2.5,i:'fa-display',y:2023,w:165},{n:'AMD RX 7700 XT',p:28,b:5.2,i:'fa-display',y:2023,w:245},{n:'AMD RX 7800 XT',p:45,b:8.5,i:'fa-display',y:2023,w:263},{n:'AMD RX 7900 XT',p:80,b:15,i:'fa-display',y:2022,w:315},{n:'AMD RX 7900 XTX',p:120,b:23,i:'fa-display',y:2022,w:355}
            ],
            ram: [
                {n:'Corsair Vengeance 8GB DDR4-2666',p:0.15,b:0.02,i:'fa-memory',y:2019,w:3},{n:'G.Skill Ripjaws V 8GB DDR4-3200',p:0.2,b:0.03,i:'fa-memory',y:2020,w:3},{n:'Kingston Fury 8GB DDR4-3200',p:0.18,b:0.03,i:'fa-memory',y:2021,w:3},{n:'Corsair Vengeance LPX 16GB DDR4-3200',p:0.4,b:0.07,i:'fa-memory',y:2020,w:5},{n:'G.Skill Ripjaws V 16GB DDR4-3600',p:0.5,b:0.09,i:'fa-memory',y:2020,w:5},{n:'Crucial Ballistix 16GB DDR4-3600',p:0.45,b:0.08,i:'fa-memory',y:2020,w:5},{n:'Corsair Vengeance RGB 16GB DDR4-3600',p:0.7,b:0.12,i:'fa-memory',y:2021,w:6},{n:'G.Skill Trident Z 16GB DDR4-3600',p:0.8,b:0.14,i:'fa-memory',y:2020,w:5},{n:'Kingston Fury Beast 32GB DDR4-3200',p:1.2,b:0.22,i:'fa-memory',y:2021,w:8},{n:'Corsair Vengeance 32GB DDR4-3600',p:1.5,b:0.28,i:'fa-memory',y:2021,w:8},{n:'G.Skill Ripjaws V 32GB DDR4-3600',p:1.4,b:0.26,i:'fa-memory',y:2021,w:8},{n:'G.Skill Trident Z RGB 32GB DDR4-3600',p:1.8,b:0.34,i:'fa-memory',y:2021,w:10},{n:'Corsair Dominator 32GB DDR4-4000',p:2.5,b:0.48,i:'fa-memory',y:2021,w:10},{n:'G.Skill Trident Z Royal 32GB DDR4-4000',p:3,b:0.58,i:'fa-memory',y:2021,w:10},{n:'Corsair Vengeance 64GB DDR4-3600',p:4,b:0.8,i:'fa-memory',y:2022,w:15},{n:'Kingston Fury Beast 16GB DDR5-5200',p:1.2,b:0.23,i:'fa-memory',y:2022,w:6},{n:'Corsair Vengeance 16GB DDR5-5600',p:1.5,b:0.29,i:'fa-memory',y:2022,w:6},{n:'G.Skill Trident Z5 16GB DDR5-6000',p:1.8,b:0.35,i:'fa-memory',y:2022,w:7},{n:'Kingston Fury Beast 32GB DDR5-5200',p:2.5,b:0.48,i:'fa-memory',y:2022,w:10},{n:'Corsair Vengeance RGB 32GB DDR5-6000',p:3.5,b:0.68,i:'fa-memory',y:2023,w:12},{n:'G.Skill Trident Z5 32GB DDR5-6400',p:4,b:0.78,i:'fa-memory',y:2023,w:12},{n:'Corsair Dominator Platinum 32GB DDR5-6600',p:5.5,b:1.1,i:'fa-memory',y:2023,w:14},{n:'G.Skill Trident Z5 Royal 32GB DDR5-7200',p:7,b:1.4,i:'fa-memory',y:2024,w:15},{n:'Corsair Vengeance 64GB DDR5-5600',p:6,b:1.2,i:'fa-memory',y:2023,w:18},{n:'G.Skill Trident Z5 64GB DDR5-6400',p:9,b:1.8,i:'fa-memory',y:2024,w:20},{n:'Corsair Dominator 96GB DDR5-6000',p:15,b:3.2,i:'fa-memory',y:2024,w:28}
            ],
            storage: [
                {n:'Kingston A400 240GB SATA SSD',p:0.12,b:0.015,i:'fa-hard-drive',y:2019,w:2},{n:'Crucial BX500 480GB SATA SSD',p:0.2,b:0.025,i:'fa-hard-drive',y:2020,w:2},{n:'Samsung 870 EVO 500GB SATA SSD',p:0.35,b:0.055,i:'fa-hard-drive',y:2021,w:3},{n:'WD Blue 1TB SATA SSD',p:0.5,b:0.08,i:'fa-hard-drive',y:2020,w:3},{n:'Samsung 870 QVO 1TB SATA SSD',p:0.6,b:0.095,i:'fa-hard-drive',y:2020,w:3},{n:'Crucial MX500 1TB SATA SSD',p:0.55,b:0.088,i:'fa-hard-drive',y:2020,w:3},{n:'Samsung 870 EVO 1TB SATA SSD',p:0.7,b:0.12,i:'fa-hard-drive',y:2021,w:3},{n:'WD Blue 2TB SATA SSD',p:1.2,b:0.2,i:'fa-hard-drive',y:2021,w:4},{n:'Samsung 870 QVO 2TB SATA SSD',p:1.4,b:0.24,i:'fa-hard-drive',y:2021,w:4},{n:'Samsung 870 EVO 2TB SATA SSD',p:1.6,b:0.28,i:'fa-hard-drive',y:2021,w:4},{n:'WD Black SN770 500GB NVMe',p:0.4,b:0.065,i:'fa-hard-drive',y:2022,w:4},{n:'Samsung 980 500GB NVMe',p:0.45,b:0.072,i:'fa-hard-drive',y:2021,w:4},{n:'Crucial P3 1TB NVMe',p:0.5,b:0.08,i:'fa-hard-drive',y:2022,w:5},{n:'WD Black SN770 1TB NVMe',p:0.8,b:0.14,i:'fa-hard-drive',y:2022,w:5},{n:'Samsung 980 PRO 1TB NVMe',p:1.5,b:0.27,i:'fa-hard-drive',y:2020,w:6},{n:'Samsung 990 EVO 1TB NVMe',p:1.3,b:0.24,i:'fa-hard-drive',y:2024,w:5},{n:'Samsung 990 PRO 1TB NVMe',p:1.8,b:0.34,i:'fa-hard-drive',y:2022,w:6},{n:'WD Black SN850X 1TB NVMe',p:1.6,b:0.3,i:'fa-hard-drive',y:2022,w:6},{n:'Crucial P3 Plus 2TB NVMe',p:1.2,b:0.22,i:'fa-hard-drive',y:2022,w:7},{n:'WD Black SN770 2TB NVMe',p:1.8,b:0.34,i:'fa-hard-drive',y:2022,w:7},{n:'Samsung 980 PRO 2TB NVMe',p:3,b:0.6,i:'fa-hard-drive',y:2021,w:8},{n:'Samsung 990 PRO 2TB NVMe',p:3.5,b:0.72,i:'fa-hard-drive',y:2023,w:8},{n:'WD Black SN850X 2TB NVMe',p:3.2,b:0.65,i:'fa-hard-drive',y:2022,w:8},{n:'Samsung 990 PRO 4TB NVMe',p:7,b:1.5,i:'fa-hard-drive',y:2023,w:10},{n:'WD Black SN850X 4TB NVMe',p:6.5,b:1.4,i:'fa-hard-drive',y:2023,w:10},{n:'Seagate BarraCuda 2TB HDD',p:0.3,b:0.04,i:'fa-hard-drive',y:2020,w:5},{n:'WD Blue 4TB HDD',p:0.5,b:0.07,i:'fa-hard-drive',y:2020,w:6},{n:'Seagate BarraCuda 4TB HDD',p:0.55,b:0.08,i:'fa-hard-drive',y:2020,w:6},{n:'WD Black 6TB HDD',p:1.2,b:0.18,i:'fa-hard-drive',y:2021,w:8},{n:'Seagate IronWolf 8TB HDD',p:1.8,b:0.3,i:'fa-hard-drive',y:2021,w:9}
            ],
            motherboard: [
                {n:'ASRock H610M-HDV',p:0.4,b:0.05,i:'fa-diagram-project',y:2022,w:15},{n:'ASUS Prime H610M-K',p:0.45,b:0.06,i:'fa-diagram-project',y:2022,w:15},{n:'MSI PRO B660M-A',p:0.8,b:0.12,i:'fa-diagram-project',y:2022,w:20},{n:'ASUS TUF Gaming B660M-Plus',p:1.2,b:0.18,i:'fa-diagram-project',y:2022,w:25},{n:'Gigabyte B660M DS3H',p:0.9,b:0.14,i:'fa-diagram-project',y:2022,w:20},{n:'MSI MAG B660 Tomahawk',p:1.8,b:0.3,i:'fa-diagram-project',y:2022,w:30},{n:'ASUS ROG Strix B660-A',p:2.5,b:0.45,i:'fa-diagram-project',y:2022,w:35},{n:'MSI MPG Z690 Edge',p:3.5,b:0.65,i:'fa-diagram-project',y:2021,w:40},{n:'ASUS TUF Gaming Z690-Plus',p:3,b:0.55,i:'fa-diagram-project',y:2021,w:35},{n:'Gigabyte Z690 AORUS Elite AX',p:4,b:0.8,i:'fa-diagram-project',y:2021,w:45},{n:'ASUS ROG Strix Z690-A',p:5.5,b:1.1,i:'fa-diagram-project',y:2021,w:50},{n:'MSI MEG Z690 ACE',p:8,b:1.7,i:'fa-diagram-project',y:2021,w:60},{n:'ASRock B550M Pro4',p:0.6,b:0.09,i:'fa-diagram-project',y:2020,w:18},{n:'MSI B550-A PRO',p:0.8,b:0.13,i:'fa-diagram-project',y:2020,w:20},{n:'ASUS TUF Gaming B550-Plus',p:1.1,b:0.17,i:'fa-diagram-project',y:2020,w:22},{n:'Gigabyte B550 AORUS Elite V2',p:1.5,b:0.26,i:'fa-diagram-project',y:2021,w:28},{n:'MSI MPG B550 Gaming Plus',p:1.3,b:0.22,i:'fa-diagram-project',y:2020,w:25},{n:'ASUS ROG Strix X570-E',p:4.5,b:0.9,i:'fa-diagram-project',y:2020,w:45},{n:'Gigabyte X670 AORUS Elite AX',p:6,b:1.3,i:'fa-diagram-project',y:2022,w:50},{n:'ASUS ROG Crosshair X670E Hero',p:12,b:2.8,i:'fa-diagram-project',y:2022,w:65}
            ],
            psu: [
                {n:'EVGA 500W 80+ Bronze',p:0.25,b:0.03,i:'fa-plug',y:2019,w:0,cap:500,eff:0.85},{n:'Corsair CV550 550W 80+ Bronze',p:0.35,b:0.05,i:'fa-plug',y:2020,w:0,cap:550,eff:0.85},{n:'Thermaltake Smart 600W 80+ White',p:0.3,b:0.04,i:'fa-plug',y:2019,w:0,cap:600,eff:0.80},{n:'EVGA 600 BA 600W 80+ Bronze',p:0.4,b:0.06,i:'fa-plug',y:2020,w:0,cap:600,eff:0.85},{n:'Corsair CX650M 650W 80+ Bronze',p:0.55,b:0.085,i:'fa-plug',y:2020,w:0,cap:650,eff:0.85},{n:'Seasonic S12III 650W 80+ Bronze',p:0.5,b:0.078,i:'fa-plug',y:2020,w:0,cap:650,eff:0.85},{n:'Corsair RM750 750W 80+ Gold',p:1.2,b:0.2,i:'fa-plug',y:2021,w:0,cap:750,eff:0.90},{n:'EVGA SuperNOVA 750W 80+ Gold',p:1.1,b:0.19,i:'fa-plug',y:2020,w:0,cap:750,eff:0.90},{n:'Seasonic Focus GX-750 750W 80+ Gold',p:1.3,b:0.23,i:'fa-plug',y:2020,w:0,cap:750,eff:0.90},{n:'Corsair RM850 850W 80+ Gold',p:1.5,b:0.27,i:'fa-plug',y:2021,w:0,cap:850,eff:0.90},{n:'EVGA SuperNOVA 850W 80+ Platinum',p:1.8,b:0.34,i:'fa-plug',y:2020,w:0,cap:850,eff:0.92},{n:'Corsair HX1000 1000W 80+ Platinum',p:2.8,b:0.58,i:'fa-plug',y:2021,w:0,cap:1000,eff:0.92},{n:'Seasonic Prime TX-1000 1000W 80+ Titanium',p:4,b:0.85,i:'fa-plug',y:2021,w:0,cap:1000,eff:0.94},{n:'Corsair AX1200 1200W 80+ Platinum',p:4.5,b:1,i:'fa-plug',y:2021,w:0,cap:1200,eff:0.92},{n:'Seasonic Prime TX-1600 1600W 80+ Titanium',p:8,b:1.9,i:'fa-plug',y:2022,w:0,cap:1600,eff:0.94}
            ],
            cases: [
                {n:'Cooler Master MasterBox Q300L',p:0.3,b:0.04,i:'fa-box',y:2019,w:0},{n:'NZXT H510',p:0.6,b:0.09,i:'fa-box',y:2019,w:0},{n:'Fractal Design Meshify C',p:0.8,b:0.13,i:'fa-box',y:2018,w:0},{n:'Corsair 4000D Airflow',p:0.9,b:0.15,i:'fa-box',y:2020,w:0},{n:'Lian Li Lancool II Mesh',p:1.2,b:0.21,i:'fa-box',y:2020,w:0},{n:'NZXT H710i',p:1.5,b:0.27,i:'fa-box',y:2019,w:0},{n:'Corsair 5000D Airflow',p:1.8,b:0.34,i:'fa-box',y:2021,w:0},{n:'Lian Li O11 Dynamic',p:2.2,b:0.44,i:'fa-box',y:2018,w:0},{n:'Phanteks Eclipse P500A',p:2,b:0.4,i:'fa-box',y:2020,w:0},{n:'Corsair Obsidian 1000D',p:6,b:1.3,i:'fa-box',y:2018,w:0},{n:'Lian Li O11 Dynamic EVO',p:2.8,b:0.58,i:'fa-box',y:2022,w:0},{n:'Thermaltake Core P8',p:3.5,b:0.75,i:'fa-box',y:2021,w:0}
            ],
            cooling: [
                {n:'Cooler Master Hyper 212',p:1,b:0.025,i:'fa-fan',y:2019,w:2,cool:7},{n:'Arctic Freezer 34',p:1.25,b:0.035,i:'fa-fan',y:2020,w:2,cool:9},{n:'be quiet! Pure Rock 2',p:1.75,b:0.055,i:'fa-fan',y:2020,w:3,cool:11},{n:'Noctua NH-U12S',p:3,b:0.095,i:'fa-fan',y:2018,w:3,cool:14},{n:'Noctua NH-D15',p:5.5,b:0.19,i:'fa-fan',y:2018,w:4,cool:19},{n:'be quiet! Dark Rock Pro 4',p:4.5,b:0.16,i:'fa-fan',y:2018,w:4,cool:17},{n:'Corsair iCUE H100i RGB',p:6.5,b:0.24,i:'fa-fan',y:2020,w:8,cool:22},{n:'NZXT Kraken X53 240mm AIO',p:7.5,b:0.28,i:'fa-fan',y:2020,w:8,cool:24},{n:'Arctic Liquid Freezer II 280',p:6,b:0.22,i:'fa-fan',y:2020,w:9,cool:26},{n:'Corsair iCUE H150i Elite 360mm AIO',p:10,b:0.42,i:'fa-fan',y:2021,w:12,cool:32},{n:'NZXT Kraken Z73 360mm AIO',p:15,b:0.65,i:'fa-fan',y:2020,w:15,cool:35},{n:'Arctic Liquid Freezer II 360',p:7.5,b:0.3,i:'fa-fan',y:2020,w:12,cool:34},{n:'Corsair iCUE H170i Elite 420mm AIO',p:17.5,b:0.78,i:'fa-fan',y:2022,w:18,cool:42},{n:'EK-AIO Elite 360 D-RGB',p:12.5,b:0.54,i:'fa-fan',y:2021,w:14,cool:34},{n:'Lian Li Galahad 360 RGB',p:11,b:0.48,i:'fa-fan',y:2021,w:13,cool:32}
            ],
            monitors: [
                {n:'AOC 24G2 24" 1080p 144Hz',p:1,b:0.17,i:'fa-desktop',y:2020,w:25},{n:'ASUS VP249QGR 24" 1080p 144Hz',p:1.2,b:0.21,i:'fa-desktop',y:2020,w:25},{n:'LG 24GN600 24" 1080p 144Hz',p:1.1,b:0.19,i:'fa-desktop',y:2021,w:24},{n:'Dell S2721DGF 27" 1440p 165Hz',p:2.5,b:0.52,i:'fa-desktop',y:2020,w:35},{n:'LG 27GL850 27" 1440p 144Hz',p:3,b:0.65,i:'fa-desktop',y:2019,w:40},{n:'ASUS TUF VG27AQ 27" 1440p 165Hz',p:2.8,b:0.6,i:'fa-desktop',y:2020,w:38},{n:'Samsung Odyssey G7 27" 1440p 240Hz',p:5,b:1.1,i:'fa-desktop',y:2020,w:50},{n:'LG 27GN950 27" 4K 144Hz',p:7,b:1.6,i:'fa-desktop',y:2020,w:65},{n:'ASUS ROG Swift PG279QM 27" 1440p 240Hz',p:8,b:1.8,i:'fa-desktop',y:2021,w:55},{n:'Alienware AW3423DW 34" 1440p Ultrawide',p:10,b:2.3,i:'fa-desktop',y:2022,w:80},{n:'LG 34GP83A-B 34" 1440p Ultrawide 144Hz',p:7.5,b:1.7,i:'fa-desktop',y:2021,w:70},{n:'Samsung Odyssey Neo G9 49" 1440p 240Hz',p:18,b:4.2,i:'fa-desktop',y:2021,w:120},{n:'ASUS ROG Swift PG32UQX 32" 4K 144Hz',p:30,b:7.5,i:'fa-desktop',y:2021,w:90},{n:'LG C2 42" OLED 4K 120Hz',p:12,b:2.8,i:'fa-desktop',y:2022,w:100},{n:'ASUS ROG Swift PG48UQ 48" OLED 4K 120Hz',p:16,b:3.8,i:'fa-desktop',y:2022,w:110}
            ],
            keyboards: [
                {n:'Logitech K120',p:0.08,b:0.01,i:'fa-keyboard',y:2019,w:1},{n:'Redragon K552 Mechanical',p:0.25,b:0.035,i:'fa-keyboard',y:2019,w:2},{n:'Corsair K55 RGB',p:0.4,b:0.065,i:'fa-keyboard',y:2020,w:3},{n:'HyperX Alloy FPS Pro',p:0.6,b:0.11,i:'fa-keyboard',y:2019,w:2},{n:'Logitech G Pro Mechanical',p:1,b:0.19,i:'fa-keyboard',y:2020,w:3},{n:'Corsair K70 RGB MK.2',p:1.5,b:0.31,i:'fa-keyboard',y:2019,w:5},{n:'Ducky One 2 Mini',p:1.3,b:0.27,i:'fa-keyboard',y:2019,w:2},{n:'Razer Huntsman Elite',p:1.8,b:0.39,i:'fa-keyboard',y:2019,w:6},{n:'SteelSeries Apex Pro',p:2.2,b:0.49,i:'fa-keyboard',y:2020,w:5},{n:'Keychron Q1 Pro',p:2,b:0.44,i:'fa-keyboard',y:2023,w:4},{n:'GMMK Pro',p:2.5,b:0.56,i:'fa-keyboard',y:2021,w:4},{n:'Wooting 60HE',p:2.8,b:0.63,i:'fa-keyboard',y:2023,w:5}
            ],
            mice: [
                {n:'Logitech G203',p:0.15,b:0.022,i:'fa-computer-mouse',y:2019,w:1},{n:'Razer DeathAdder Essential',p:0.25,b:0.04,i:'fa-computer-mouse',y:2019,w:1},{n:'SteelSeries Rival 3',p:0.3,b:0.05,i:'fa-computer-mouse',y:2020,w:1},{n:'Logitech G502 HERO',p:0.5,b:0.09,i:'fa-computer-mouse',y:2019,w:2},{n:'Razer Viper',p:0.6,b:0.11,i:'fa-computer-mouse',y:2019,w:1},{n:'Logitech G Pro Wireless',p:1.2,b:0.24,i:'fa-computer-mouse',y:2018,w:1},{n:'Razer Viper Ultimate',p:1.3,b:0.27,i:'fa-computer-mouse',y:2019,w:1},{n:'Logitech G Pro X Superlight',p:1.5,b:0.32,i:'fa-computer-mouse',y:2020,w:1},{n:'Razer DeathAdder V3 Pro',p:1.4,b:0.29,i:'fa-computer-mouse',y:2022,w:1},{n:'Finalmouse Starlight-12',p:3,b:0.7,i:'fa-computer-mouse',y:2021,w:1},{n:'Logitech G Pro X Superlight 2',p:1.6,b:0.35,i:'fa-computer-mouse',y:2023,w:1},{n:'Razer Viper V3 Pro',p:1.7,b:0.38,i:'fa-computer-mouse',y:2024,w:1}
            ],
            headsets: [
                {n:'Logitech G432',p:0.3,b:0.05,i:'fa-headphones',y:2019,w:2},{n:'HyperX Cloud Stinger',p:0.35,b:0.06,i:'fa-headphones',y:2018,w:1},{n:'Corsair HS60 Pro',p:0.5,b:0.09,i:'fa-headphones',y:2020,w:2},{n:'HyperX Cloud II',p:0.8,b:0.15,i:'fa-headphones',y:2015,w:2},{n:'SteelSeries Arctis 5',p:0.9,b:0.17,i:'fa-headphones',y:2019,w:3},{n:'Razer BlackShark V2',p:1,b:0.2,i:'fa-headphones',y:2020,w:2},{n:'HyperX Cloud Alpha',p:1.2,b:0.25,i:'fa-headphones',y:2017,w:2},{n:'SteelSeries Arctis 7+',p:1.8,b:0.4,i:'fa-headphones',y:2022,w:3},{n:'SteelSeries Arctis Nova Pro',p:3,b:0.7,i:'fa-headphones',y:2022,w:4},{n:'Audeze Maxwell',p:3.5,b:0.85,i:'fa-headphones',y:2023,w:4}
            ],
            accessories: [
                {n:'USB 2.0 Hub 4-Port',p:0.05,b:0.005,i:'fa-usb',y:2020,w:2},{n:'USB 3.0 Hub 4-Port',p:0.1,b:0.012,i:'fa-usb',y:2020,w:3},{n:'Basic Mouse Pad',p:0.02,b:0.002,i:'fa-table-cells',y:2019,w:0},{n:'Extended Mouse Pad XXL',p:0.15,b:0.02,i:'fa-table-cells-large',y:2020,w:0},{n:'SteelSeries QcK Gaming Mouse Pad',p:0.12,b:0.015,i:'fa-table-cells',y:2019,w:0},{n:'Cable Management Kit',p:0.08,b:0.01,i:'fa-screwdriver-wrench',y:2020,w:0},{n:'LED Light Strip 3m',p:0.18,b:0.025,i:'fa-lightbulb',y:2020,w:10},{n:'RGB Light Strip 5m',p:0.4,b:0.065,i:'fa-lightbulb',y:2021,w:15},{n:'Philips Hue Light Strip',p:1.2,b:0.24,i:'fa-lightbulb',y:2021,w:20},{n:'Monitor Arm Single',p:0.6,b:0.1,i:'fa-arrows-up-down',y:2020,w:0},{n:'Monitor Arm Dual',p:1.5,b:0.3,i:'fa-arrows-up-down',y:2020,w:0},{n:'Desk Mat Large',p:0.25,b:0.04,i:'fa-table-cells',y:2020,w:0},{n:'Webcam 1080p Logitech C920',p:0.6,b:0.11,i:'fa-video',y:2019,w:3},{n:'Webcam 4K Logitech Brio',p:2,b:0.45,i:'fa-video',y:2020,w:5},{n:'Elgato Stream Deck',p:1.5,b:0.33,i:'fa-table-cells',y:2020,w:5},{n:'Blue Yeti Microphone',p:1.3,b:0.28,i:'fa-microphone',y:2019,w:5},{n:'Shure SM7B Microphone',p:4,b:0.95,i:'fa-microphone',y:2018,w:2},{n:'Elgato Wave:3 Microphone',p:1.6,b:0.36,i:'fa-microphone',y:2020,w:5},{n:'APC UPS 600VA',p:1.8,b:0.4,i:'fa-battery-three-quarters',y:2020,w:0},{n:'CyberPower UPS 1500VA',p:4.5,b:1.1,i:'fa-battery-full',y:2021,w:0}
            ],
            chairs: [
                {n:'Basic Office Chair',p:0.5,b:0.08,i:'fa-chair',y:2019,w:0},{n:'Homall Gaming Chair',p:1.2,b:0.22,i:'fa-chair',y:2020,w:0},{n:'RESPAWN Gaming Chair',p:2,b:0.42,i:'fa-chair',y:2020,w:0},{n:'Secretlab Titan Evo 2022',p:5,b:1.2,i:'fa-chair',y:2022,w:0},{n:'Herman Miller Aeron',p:15,b:3.8,i:'fa-chair',y:2018,w:0},{n:'Steelcase Leap V2',p:12,b:3,i:'fa-chair',y:2019,w:0},{n:'Herman Miller Embody',p:18,b:4.5,i:'fa-chair',y:2018,w:0},{n:'Secretlab Titan Evo Plus',p:7,b:1.7,i:'fa-chair',y:2024,w:0}
            ],
            desks: [
                {n:'Ikea LINNMON Desk',p:0.4,b:0.06,i:'fa-table',y:2019,w:0},{n:'FlexiSpot Standing Desk',p:3,b:0.65,i:'fa-table',y:2020,w:0},{n:'Uplift V2 Standing Desk',p:6,b:1.4,i:'fa-table',y:2021,w:0},{n:'Secretlab Magnus Pro',p:8,b:1.9,i:'fa-table',y:2022,w:0},{n:'Herman Miller Motia Desk',p:12,b:2.9,i:'fa-table',y:2021,w:0},{n:'Fully Jarvis Bamboo Desk',p:7,b:1.6,i:'fa-table',y:2020,w:0}
            ]
        };

        const marketplaceItems = [];
        let itemId = 0;
        Object.keys(pcItemsDatabase).forEach(category => {
            pcItemsDatabase[category].forEach(item => {
                let socket = 'universal';
                let ramType = 'universal';
                
                if (category === 'cpu') {
                    if (item.n.includes('Intel')) {
                        if (item.n.includes('12') || item.n.includes('13') || item.n.includes('14')) {
                            socket = 'LGA1700';
                        } else {
                            socket = 'LGA1200';
                        }
                    } else if (item.n.includes('AMD')) {
                        if (item.n.includes('7')) {
                            socket = 'AM5';
                        } else if (item.n.includes('5')) {
                            socket = 'AM4';
                        } else if (item.n.includes('Threadripper')) {
                            socket = 'sTRX4';
                        }
                    }
                } else if (category === 'motherboard') {
                    if (item.n.includes('H610') || item.n.includes('B660') || item.n.includes('Z690')) {
                        socket = 'LGA1700';
                        ramType = 'DDR4';
                    } else if (item.n.includes('B550') || item.n.includes('X570')) {
                        socket = 'AM4';
                        ramType = 'DDR4';
                    } else if (item.n.includes('X670') || item.n.includes('B650')) {
                        socket = 'AM5';
                        ramType = 'DDR5';
                    }
                } else if (category === 'ram') {
                    ramType = item.n.includes('DDR5') ? 'DDR5' : 'DDR4';
                }
                
                marketplaceItems.push({
                    id: `item_${itemId++}`,
                    category,
                    name: item.n,
                    price: item.p,
                    basePrice: item.p,
                    boost: item.b,
                    baseBoost: item.b,
                    icon: item.i,
                    year: item.y,
                    watts: item.w || 0,
                    cooling: item.cool || 0,
                    psuCapacity: item.cap || 0,
                    psuEfficiency: item.eff || 1.0,
                    socket: socket,
                    ramType: ramType,
                    owned: false,
                    isBlackMarket: false,
                    quality: null
                });
            });
        });

        function checkCompatibility() {
            const build = gameState.currentBuild;
            let issues = [];
            let penalty = 0;
            
            build.cpu = allMarketItems.find(i => i.owned && i.category === 'cpu') || null;
            build.motherboard = allMarketItems.find(i => i.owned && i.category === 'motherboard') || null;
            build.ram = allMarketItems.filter(i => i.owned && i.category === 'ram');
            build.psu = allMarketItems.find(i => i.owned && i.category === 'psu' && i.psuCapacity > 0) || null;
            
            if (build.cpu && build.motherboard) {
                if (build.cpu.socket !== 'universal' && build.motherboard.socket !== 'universal') {
                    if (build.cpu.socket !== build.motherboard.socket) {
                        issues.push({
                            type: 'critical',
                            message: `CPU socket ${build.cpu.socket} incompatible with motherboard socket ${build.motherboard.socket}!`,
                            penalty: 10
                        });
                        penalty += 10;
                    }
                }
            }
            
            if (build.motherboard && build.ram.length > 0) {
                build.ram.forEach(ram => {
                    if (ram.ramType !== 'universal' && build.motherboard.ramType !== 'universal') {
                        if (ram.ramType !== build.motherboard.ramType) {
                            issues.push({
                                type: 'critical',
                                message: `${ram.name} (${ram.ramType}) incompatible with motherboard (requires ${build.motherboard.ramType})!`,
                                penalty: 5
                            });
                            penalty += 5;
                        }
                    }
                });
            }
            
            if (build.cpu && !build.motherboard) {
                issues.push({
                    type: 'warning',
                    message: `CPU without motherboard - wasting potential!`,
                    penalty: 2
                });
                penalty += 2;
            }
            
            if (build.motherboard && !build.cpu) {
                issues.push({
                    type: 'warning',
                    message: `Motherboard without CPU - useless!`,
                    penalty: 1
                });
                penalty += 1;
            }
            
            gameState.incompatibilityPenalty = penalty;
            return issues;
        }

        const blackMarketItems = [];
        marketplaceItems.forEach(item => {
            if (item.basePrice > 5 && (item.category === 'cpu' || item.category === 'gpu' || item.category === 'motherboard')) {
                const bmItem = {
                    ...item,
                    id: `bm_${item.id}`,
                    price: item.basePrice * (Math.random() * 0.3 + 0.3), // 30-60% discount
                    isBlackMarket: true,
                    owned: false,
                    quality: null
                };
                blackMarketItems.push(bmItem);
            }
        });

        const allMarketItems = [...marketplaceItems, ...blackMarketItems];

        function showToast(type, title, message) {
            const container = document.getElementById('toast-container') || createToastContainer();
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="toast-title">${title}</div>
                <div class="toast-message">${message}</div>
            `;
            container.appendChild(toast);
            toast.onclick = () => toast.remove();
            setTimeout(() => toast.remove(), 2000);
        }

        function createToastContainer() {
            const container = document.createElement('div');
            container.id = 'toast-container';
            container.className = 'toast-container';
            document.body.appendChild(container);
            return container;
        }

        function updateMarketPrices() {
            const now = Date.now();
            if (now - gameState.lastMarketUpdate < 30000) return; // Update every 30s
            
            gameState.lastMarketUpdate = now;
            
            const event = realNewsEvents[Math.floor(Math.random() * realNewsEvents.length)];
            
            if (event.elec !== 1.0) {
                gameState.electricityMultiplier = event.elec;
                gameState.electricityRate = 0.0001 * event.elec; // Updated to match new base rate
            }
            
            if (event.category && event.category !== 'all') {
                marketplaceItems.forEach(item => {
                    if (item.category === event.category && !item.isBlackMarket) {
                        const multiplier = 1 + event.change;
                        item.price = item.basePrice * multiplier;
                        gameState.priceMultipliers[item.id] = multiplier;
                    }
                });
            } else if (event.category === 'all') {
                marketplaceItems.forEach(item => {
                    if (!item.isBlackMarket) {
                        const multiplier = 1 + event.change;
                        item.price = item.basePrice * multiplier;
                        gameState.priceMultipliers[item.id] = multiplier;
                    }
                });
            }
            
            updateNewsTicker(event);
            
            Object.keys(gameState.priceMultipliers).forEach(id => {
                const item = allMarketItems.find(i => i.id === id);
                if (item && !item.isBlackMarket) {
                    gameState.priceMultipliers[id] *= 0.95; // Move 5% towards 1.0
                    item.price = item.basePrice * gameState.priceMultipliers[id];
                    if (Math.abs(gameState.priceMultipliers[id] - 1) < 0.01) {
                        delete gameState.priceMultipliers[id];
                        item.price = item.basePrice;
                    }
                }
            });
            
            if (gameState.electricityMultiplier !== 1.0) {
                gameState.electricityMultiplier *= 0.98; // Slowly return to normal
                if (Math.abs(gameState.electricityMultiplier - 1.0) < 0.05) {
                    gameState.electricityMultiplier = 1.0;
                    gameState.electricityRate = 0.0001; // Updated base rate
                }
            }
        }

        const realNewsEvents = [
            { icon: 'fa-chart-line', text: 'NVIDIA announces RTX 50-series - RTX 40-series prices dropping', category: 'gpu', change: -0.15, elec: 1.0 },
            { icon: 'fa-fire', text: 'Cryptocurrency mining boom - GPU demand surges, prices up 40%', category: 'gpu', change: 0.4, elec: 1.0 },
            { icon: 'fa-industry', text: 'TSMC fab fire disrupts GPU production - Prices spike', category: 'gpu', change: 0.3, elec: 1.0 },
            
            { icon: 'fa-microchip', text: 'Intel 15th gen launch - Previous generation 20% off', category: 'cpu', change: -0.2, elec: 1.0 },
            { icon: 'fa-chart-line', text: 'AMD Ryzen 8000 series announced - AM4 CPUs clearance sale', category: 'cpu', change: -0.25, elec: 1.0 },
            { icon: 'fa-exclamation-triangle', text: 'Global chip shortage intensifies - CPU prices surge', category: 'cpu', change: 0.35, elec: 1.0 },
            
            { icon: 'fa-memory', text: 'DDR5 production ramps up - DDR4 prices falling rapidly', category: 'ram', change: -0.2, elec: 1.0 },
            { icon: 'fa-bolt', text: 'Samsung factory accident - RAM shortage expected', category: 'ram', change: 0.3, elec: 1.0 },
            { icon: 'fa-industry', text: 'Major RAM manufacturer bankruptcy - Prices volatile', category: 'ram', change: 0.25, elec: 1.0 },
            
            { icon: 'fa-bolt', text: 'Energy crisis: Electricity prices increase 50%!', category: null, change: 0, elec: 1.5 },
            { icon: 'fa-leaf', text: 'Green energy breakthrough - Electricity costs down 30%', category: null, change: 0, elec: 0.7 },
            { icon: 'fa-fire', text: 'Heatwave forces power rationing - Electricity 2x cost!', category: null, change: 0, elec: 2.0 },
            { icon: 'fa-sun', text: 'Solar power expansion - Electricity bills reduced', category: null, change: 0, elec: 0.8 },
            
            { icon: 'fa-hard-drive', text: 'SSD price war - Major brands slashing prices', category: 'storage', change: -0.3, elec: 1.0 },
            { icon: 'fa-warehouse', text: 'NAND shortage - SSD prices climbing', category: 'storage', change: 0.25, elec: 1.0 },
            
            { icon: 'fa-diagram-project', text: 'New chipset release - Old motherboards 15% off', category: 'motherboard', change: -0.15, elec: 1.0 },
            { icon: 'fa-exclamation', text: 'PCIe 5.0 adoption surge - AM4/LGA1200 boards discounted', category: 'motherboard', change: -0.2, elec: 1.0 },
            
            { icon: 'fa-ship', text: 'Supply chain delays - All component prices up 10%', category: 'all', change: 0.1, elec: 1.0 },
            { icon: 'fa-truck', text: 'Shipping costs normalize - Component prices stabilizing', category: null, change: 0, elec: 1.0 },
            { icon: 'fa-dollar-sign', text: 'Black Friday sales - Massive discounts across all categories', category: 'all', change: -0.35, elec: 1.0 }
        ];

        function updateNewsTicker(marketEvent) {
            const ticker = document.getElementById('news-ticker');
            const t = translations[gameState.currentLang];
            
            let newsHTML = '';
            
            if (marketEvent && marketEvent.text) {
                const typeClass = marketEvent.change > 0 ? 'news-negative' : marketEvent.change < 0 ? 'news-positive' : '';
                newsHTML += `
                    <div class="news-item">
                        <i class="fa ${marketEvent.icon || 'fa-newspaper'} news-icon"></i>
                        <span class="news-text ${typeClass}">${marketEvent.text}</span>
                    </div>
                `;
            }
            
            const randomNews = realNewsEvents.sort(() => Math.random() - 0.5).slice(0, 3);
            randomNews.forEach(news => {
                const typeClass = news.change > 0 ? 'news-negative' : news.change < 0 ? 'news-positive' : '';
                newsHTML += `
                    <div class="news-item">
                        <i class="fa ${news.icon} news-icon"></i>
                        <span class="news-text ${typeClass}">${news.text}</span>
                    </div>
                `;
            });
            
            ticker.innerHTML = newsHTML + newsHTML; // Duplicate for seamless loop
        }

        function calculateSystemStats() {
            let totalWatts = 50; // Base system consumption
            let totalCooling = 5; // Base cooling
            let maxPSU = 500; // Base PSU
            let psuEfficiency = 0.85; // Default Bronze efficiency

            marketplaceItems.forEach(item => {
                if (item.owned) {
                    totalWatts += item.watts;
                    if (item.cooling > 0) {
                        totalCooling += item.cooling;
                    }
                    if (item.psuCapacity > 0) {
                        maxPSU = item.psuCapacity;
                        psuEfficiency = item.psuEfficiency;
                    }
                }
            });

            const powerDraw = totalWatts / psuEfficiency;
            const electricityCost = powerDraw * gameState.electricityRate;

            const isPowerOverload = totalWatts > maxPSU;

            const heatPerSecond = (totalWatts * 0.05) + gameState.baseHeatGeneration;
            const multiplier = gameState.isOverclocked ? gameState.overclockHeatMultiplier : 1;
            const netHeat = (heatPerSecond * multiplier) - totalCooling;

            return { totalWatts, maxPSU, totalCooling, isPowerOverload, electricityCost, netHeat, psuEfficiency };
        }

        function updateHeatSystem(deltaTime = 0.1) {
            const stats = calculateSystemStats();

            let heatPerSecond = (stats.totalWatts * 0.05) + gameState.baseHeatGeneration;
            
            if (gameState.isOverclocked) {
                heatPerSecond *= gameState.overclockHeatMultiplier;
            }
            
            const netHeat = heatPerSecond - stats.totalCooling;

            gameState.temperature += netHeat * deltaTime;
            gameState.temperature = Math.max(25, Math.min(100, gameState.temperature));

            if (gameState.temperature < 50) {
                gameState.efficiency = 1.0;
            } else if (gameState.temperature < 70) {
                gameState.efficiency = 1.0 - ((gameState.temperature - 50) / 100);
            } else if (gameState.temperature < 85) {
                gameState.efficiency = 0.8 - ((gameState.temperature - 70) / 50);
            } else {
                gameState.efficiency = Math.max(0.2, 0.5 - ((gameState.temperature - 85) / 30));
            }

            const electricityCost = stats.electricityCost * gameState.electricityMultiplier;
            gameState.money -= electricityCost * deltaTime;
            gameState.totalElectricityCost += electricityCost * deltaTime;

            if (stats.isPowerOverload) {
                gameState.efficiency = 0;
            }

            return stats;
        }

        function toggleOverclock() {
            const t = translations[gameState.currentLang];
            
            if (gameState.isOverclocked) {
                gameState.isOverclocked = false;
                document.getElementById('overclock-btn-text').textContent = t.overclockBtnEnable;
                document.getElementById('overclock-btn').classList.remove('btn-warning');
                document.getElementById('overclock-btn').classList.add('btn-danger');
            } else {
                gameState.isOverclocked = true;
                document.getElementById('overclock-btn-text').textContent = t.overclockBtnDisable;
                document.getElementById('overclock-btn').classList.remove('btn-danger');
                document.getElementById('overclock-btn').classList.add('btn-warning');
                
                if (Math.random() < gameState.overclockFailureChance) {
                    const ownedItems = marketplaceItems.filter(i => i.owned && (i.category === 'cpu' || i.category === 'gpu'));
                    if (ownedItems.length > 0) {
                        const damaged = ownedItems[Math.floor(Math.random() * ownedItems.length)];
                        damaged.owned = false;
                        delete gameState.inventory[damaged.id];
                        gameState.incomePerSecond -= damaged.boost;
                        alert(t.componentDamaged + ' ' + damaged.name);
                        renderMarketplace();
                        renderInventory();
                    }
                }
            }
        }

        function updateSystemStatsUI() {
            const stats = calculateSystemStats();
            const t = translations[gameState.currentLang];

            document.getElementById('power-usage').textContent = Math.round(stats.totalWatts) + 'W';
            document.getElementById('power-limit').textContent = stats.maxPSU + 'W';
            document.getElementById('cooling-power').textContent = Math.round(stats.totalCooling) + '°C/s';
            document.getElementById('electricity-cost').textContent = '-' + formatMoney(stats.electricityCost) + '/s';

            const tempEl = document.getElementById('temp-display');
            tempEl.textContent = Math.round(gameState.temperature) + '°C';
            tempEl.className = 'temp-display';
            if (gameState.temperature < 50) tempEl.classList.add('temp-normal');
            else if (gameState.temperature < 70) tempEl.classList.add('temp-warm');
            else if (gameState.temperature < 85) tempEl.classList.add('temp-hot');
            else tempEl.classList.add('temp-critical');

            const effEl = document.getElementById('efficiency');
            const effPercent = Math.round(gameState.efficiency * 100);
            effEl.textContent = effPercent + '%';
            effEl.className = 'system-stat-value efficiency-value';
            if (effPercent >= 90) effEl.classList.add('efficiency-high');
            else if (effPercent >= 60) effEl.classList.add('efficiency-medium');
            else effEl.classList.add('efficiency-low');

            const powerWarning = document.getElementById('power-warning');
            if (stats.isPowerOverload) {
                powerWarning.style.display = 'flex';
                powerWarning.querySelector('span').textContent = t.powerWarning;
            } else {
                powerWarning.style.display = 'none';
            }
        }

        function checkDisasters() {
            const now = Date.now();
            if (now - gameState.lastDisasterCheck < gameState.disasterCooldown) return;
            
            const t = translations[gameState.currentLang];
            
            const ownedCount = allMarketItems.filter(i => i.owned).length;
            gameState.ramUsagePercent = Math.min(95, (ownedCount / 50) * 100);
            
            if (Math.random() < 0.001 || gameState.ramUsagePercent > 90) {
                if (gameState.ramUsagePercent > 90 && Math.random() < 0.1) {
                    triggerBSOD();
                    gameState.lastDisasterCheck = now;
                    return;
                }
            }
            
            if (gameState.temperature > 85 && gameState.isOverclocked) {
                if (Math.random() < 0.05) { // 5% chance when overclocked and hot
                    triggerComponentExplosion();
                    gameState.lastDisasterCheck = now;
                    return;
                }
            }
        }

        function triggerBSOD() {
            playBSOD();
            const stopCodes = [
                'CRITICAL_PROCESS_DIED',
                'SYSTEM_SERVICE_EXCEPTION',
                'MEMORY_MANAGEMENT',
                'IRQL_NOT_LESS_OR_EQUAL',
                'SYSTEM_THREAD_EXCEPTION_NOT_HANDLED',
                'PAGE_FAULT_IN_NONPAGED_AREA',
                'KERNEL_DATA_INPAGE_ERROR'
            ];
            const stopCode = stopCodes[Math.floor(Math.random() * stopCodes.length)];
            const progress = Math.floor(Math.random() * 35);
            
            const bsod = document.createElement('div');
            bsod.className = 'bsod-screen';
            bsod.innerHTML = `
                <div class="bsod-content">
                    <div class="bsod-sad">:(</div>
                    <div class="bsod-title">Your PC ran into a problem and needs to restart.</div>
                    <div class="bsod-text">We're just collecting some error info, and then we'll restart for you.</div>
                    <div class="bsod-progress">${progress}% complete</div>
                    <div class="bsod-text" style="margin-top: 40px;">
                        If you'd like to know more, you can search online later for this error: ${stopCode}
                    </div>
                </div>
                <div class="bsod-footer">
                    <a href="#" class="bsod-link" onclick="return false">Privacy</a>
                    <a href="#" class="bsod-link" onclick="return false">Terms</a>
                    <a href="#" class="bsod-link" onclick="return false">Home</a>
                    <a href="#" class="bsod-link" onclick="return false">Stop_Code: ${stopCode}</a>
                </div>
            `;
            document.body.appendChild(bsod);
            
            const originalEfficiency = gameState.efficiency;
            gameState.efficiency *= 0.5;
            
            setTimeout(() => {
                bsod.remove();
            }, 5000);
            
            setTimeout(() => {
                gameState.efficiency = Math.min(1.0, originalEfficiency);
            }, 30000);
        }

        function triggerComponentExplosion() {
            playExplosion();
            const t = translations[gameState.currentLang];
            const cpusAndGpus = allMarketItems.filter(i => i.owned && (i.category === 'cpu' || i.category === 'gpu'));
            
            if (cpusAndGpus.length === 0) return;
            
            const victim = cpusAndGpus[Math.floor(Math.random() * cpusAndGpus.length)];
            
            createExplosion();
            
            victim.owned = false;
            delete gameState.inventory[victim.id];
            gameState.incomePerSecond -= victim.boost;
            
            if (gameState.isOverclocked) {
                toggleOverclock();
            }
            
            showToast('error', 'COMPONENT DESTROYED', `${victim.name} exploded from overheating! Lost -${formatMoney(victim.boost)}/s`);
            
            renderMarketplace();
            renderInventory();
        }

        function createExplosion() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const explosion = document.createElement('div');
                    explosion.className = 'explosion';
                    explosion.textContent = '💥';
                    explosion.style.left = (window.innerWidth / 2 + (Math.random() - 0.5) * 200) + 'px';
                    explosion.style.top = (window.innerHeight / 2 + (Math.random() - 0.5) * 200) + 'px';
                    document.body.appendChild(explosion);
                    setTimeout(() => explosion.remove(), 1000);
                    
                    const smoke = document.createElement('div');
                    smoke.className = 'smoke';
                    smoke.textContent = '💨';
                    smoke.style.left = explosion.style.left;
                    smoke.style.top = explosion.style.top;
                    document.body.appendChild(smoke);
                    setTimeout(() => smoke.remove(), 2000);
                }, i * 100);
            }
        }


        function loadGame() {
            const saved = localStorage.getItem('pcTycoonSave');
            if (saved) {
                const data = JSON.parse(saved);
                Object.assign(gameState, data);
                marketplaceItems.forEach(item => {
                    if (gameState.inventory[item.id]) {
                        item.owned = true;
                    }
                });
            }
        }

        function saveGame() {
            localStorage.setItem('pcTycoonSave', JSON.stringify(gameState));
        }

        function formatMoney(amount) {
            if (amount >= 1000000) return '$' + (amount / 1000000).toFixed(2) + 'M';
            if (amount >= 1000) return '$' + (amount / 1000).toFixed(2) + 'K';
            if (amount >= 1) return '$' + amount.toFixed(2);
            return '$' + amount.toFixed(3);
        }

        document.getElementById('click-btn').addEventListener('click', function(e) {
            initAudioContext();
            playMechanicalKeyboard();
            
            const ocMultiplier = gameState.isOverclocked ? gameState.overclockMultiplier : 1;
            const income = gameState.incomePerClick * ocMultiplier * gameState.efficiency;
            gameState.money += income;
            gameState.exp += 1;
            
            if (income > 0) {
                playMoneyTing();
            }
            
            const float = document.createElement('div');
            float.className = 'float-number';
            float.textContent = '+' + formatMoney(income);
            float.style.left = e.clientX + 'px';
            float.style.top = e.clientY + 'px';
            document.body.appendChild(float);
            setTimeout(() => float.remove(), 1000);

            checkLevelUp();
            updateUI();
        });

        function checkLevelUp() {
            while (gameState.exp >= gameState.expToLevel) {
                gameState.level++;
                gameState.exp -= gameState.expToLevel;
                gameState.expToLevel = Math.floor(gameState.expToLevel * 1.5);
            }
        }

        function updateUI() {
            const t = translations[gameState.currentLang];
            const ocMultiplier = gameState.isOverclocked ? gameState.overclockMultiplier : 1;
            document.getElementById('money').textContent = formatMoney(gameState.money);
            document.getElementById('income-per-click').textContent = formatMoney(gameState.incomePerClick * ocMultiplier);
            document.getElementById('income-per-sec').textContent = formatMoney(gameState.incomePerSecond * ocMultiplier * gameState.efficiency / 1000) + '/min';
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('click-value-text').textContent = formatMoney(gameState.incomePerClick * ocMultiplier * gameState.efficiency);
            
            const homeProgress = document.getElementById('home-progress');
            if (homeProgress) {
                homeProgress.innerHTML = `
                    <div>💰 Money: <strong>${formatMoney(gameState.money)}</strong></div>
                    <div>📈 Level: <strong>${gameState.level}</strong></div>
                    <div>🔥 Income: <strong>${formatMoney(gameState.incomePerSecond * ocMultiplier * gameState.efficiency / 1000)}/min</strong></div>
                    <div>🌡️ Temp: <strong>${Math.round(gameState.temperature)}°C</strong></div>
                `;
            }
            
            updateSystemStatsUI();
        }

        document.getElementById('lang-switch').addEventListener('change', function(e) {
            gameState.currentLang = e.target.value;
            updateLanguage();
            renderAll();
        });

        function updateLanguage() {
            const t = translations[gameState.currentLang];
            document.getElementById('title').textContent = t.title;
            document.getElementById('label-money').textContent = t.labelMoney;
            document.getElementById('label-income').textContent = t.labelIncome;
            document.getElementById('label-auto').textContent = t.labelAuto;
            document.getElementById('label-level').textContent = t.labelLevel;
            document.getElementById('card-work').textContent = t.cardWork;
            document.getElementById('card-market').textContent = t.cardMarket;
            document.getElementById('card-inventory').textContent = t.cardInventory;
            document.getElementById('btn-text').textContent = t.btnText;
            document.getElementById('tab-upgrades').textContent = t.tabUpgrades;
            document.getElementById('tab-workers').textContent = t.tabWorkers;
            document.getElementById('tab-jobs').textContent = t.tabJobs;
            document.getElementById('search-box').placeholder = t.searchPlaceholder;
            document.getElementById('sort-label').textContent = t.sortLabel;
            document.getElementById('label-per-click').textContent = t.labelPerClick;
            document.getElementById('label-temp').textContent = t.labelTemp;
            document.getElementById('label-power-usage').textContent = t.labelPowerUsage;
            document.getElementById('label-power-limit').textContent = t.labelPowerLimit;
            document.getElementById('label-cooling').textContent = t.labelCooling;
            document.getElementById('label-efficiency').textContent = t.labelEfficiency;
            document.getElementById('label-electricity-cost').textContent = t.labelElectricityCost;
            document.getElementById('label-overclock').textContent = t.labelOverclock;
            document.getElementById('overclock-desc').textContent = t.overclockDesc;
            document.getElementById('overclock-btn-text').textContent = gameState.isOverclocked ? t.overclockBtnDisable : t.overclockBtnEnable;
        }

        function renderUpgrades() {
            const t = translations[gameState.currentLang];
            const container = document.getElementById('upgrades-list');
            container.innerHTML = upgrades.map(upgrade => {
                const level = gameState.upgrades[upgrade.id] || 0;
                const cost = upgrade.cost * Math.pow(1.5, level);
                const canAfford = gameState.money >= cost;
                
                return `
                    <div class="item">
                        <div class="item-header">
                            <span class="item-name">${upgrade.name[gameState.currentLang]}</span>
                            <span class="item-level">${t.level} ${level}</span>
                        </div>
                        <div class="item-stats">
                            <span class="item-stat"><i class="fa fa-dollar-sign"></i> ${formatMoney(cost)}</span>
                            <span class="item-stat"><i class="fa fa-arrow-up"></i> +${formatMoney(upgrade.boost)}</span>
                        </div>
                        <button class="btn btn-primary" onclick="buyUpgrade('${upgrade.id}')" ${!canAfford ? 'disabled' : ''}>
                            ${t.buy}
                        </button>
                    </div>
                `;
            }).join('');
        }

        function renderWorkers() {
            const t = translations[gameState.currentLang];
            const container = document.getElementById('workers-list');
            container.innerHTML = workers.map(worker => {
                const count = gameState.workers[worker.id] || 0;
                const cost = worker.cost * Math.pow(1.15, count);
                const canAfford = gameState.money >= cost;
                
                return `
                    <div class="item">
                        <div class="item-header">
                            <span class="item-name">${worker.name[gameState.currentLang]}</span>
                            <span class="item-level">x${count}</span>
                        </div>
                        <div class="item-stats">
                            <span class="item-stat"><i class="fa fa-dollar-sign"></i> ${formatMoney(cost)}</span>
                            <span class="item-stat"><i class="fa fa-chart-line"></i> ${formatMoney(worker.income)}/s</span>
                        </div>
                        ${count > 0 ? `<div class="item-stats"><span style="color: var(--accent-success)"><i class="fa fa-check"></i> ${t.producing} ${formatMoney(worker.income * count)}/s</span></div>` : ''}
                        <button class="btn btn-primary" onclick="hireWorker('${worker.id}')" ${!canAfford ? 'disabled' : ''}>
                            ${t.hire}
                        </button>
                    </div>
                `;
            }).join('');
        }

        function renderJobs() {
            const container = document.getElementById('jobs-list');
            const t = translations[gameState.currentLang];
            
            container.innerHTML = jobs.map(job => {
                const unlocked = gameState.jobs[job.id];
                const canAfford = gameState.money >= job.cost;
                const canUnlock = gameState.incomePerClick >= job.unlock;
                const jobName = job.name[gameState.currentLang];
                const scamBadge = job.scam ? '<span class="scam-badge">SCAM</span>' : '';
                
                return `
                    <div class="item">
                        <div class="item-header">
                            <div class="item-name">${jobName}${scamBadge}</div>
                            ${unlocked ? `<div style="color: var(--accent-success); font-size: 0.9em;"><i class="fa fa-check"></i> ${t.unlocked}</div>` : ''}
                        </div>
                        <div class="item-stats">
                            <div class="item-stat"><i class="fa fa-dollar-sign"></i> ${formatMoney(job.cost)}</div>
                            <div class="item-stat"><i class="fa fa-arrow-up"></i> +${formatMoney(job.unlock)} ${t.perClick}</div>
                        </div>
                        ${!unlocked ? 
                            `<button class="btn btn-primary" onclick="unlockJob('${job.id}')" ${!canAfford || !canUnlock ? 'disabled' : ''}>${t.unlock}</button>` :
                            ''
                        }
                        ${!canUnlock && !unlocked ? `<div style="color: var(--accent-warning); font-size: 0.8em; margin-top: 5px;">Requires ${formatMoney(job.unlock)}/click</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        function renderTopUp() {
            const container = document.getElementById('topup-grid');
            
            container.innerHTML = topupPackages.map(pkg => {
                return `
                    <div class="topup-card" onclick="processTopUp('${pkg.id}')">
                        <div class="topup-icon">
                            <i class="fa ${pkg.icon}"></i>
                        </div>
                        <div class="topup-method">${pkg.method}</div>
                        <div class="topup-amount">$${pkg.amount.toLocaleString()}</div>
                        <div class="topup-price">${pkg.price}</div>
                        <div class="topup-bonus">${pkg.bonus} BONUS</div>
                        <button class="btn-topup">Top Up</button>
                    </div>
                `;
            }).join('');
        }

        function processTopUp(id) {
            const pkg = topupPackages.find(p => p.id === id);
            if (!pkg) return;
            
            const bonus = parseFloat(pkg.bonus.replace(/[^0-9.]/g, '')) / 100;
            const totalAmount = pkg.amount * (1 + bonus);
            
            if (confirm(`Top up $${pkg.amount.toLocaleString()} + ${pkg.bonus} bonus?\n\nTotal: $${Math.floor(totalAmount).toLocaleString()}\nPrice: ${pkg.price}\n\n(Simulation - No real payment)`)) {
                gameState.money += totalAmount;
                showToast('success', 'TOP UP SUCCESS', `+$${Math.floor(totalAmount).toLocaleString()} added to your account!`);
                updateUI();
                saveGame();
            }
        }

        let currentCategory = 'all';
        let searchTerm = '';

        function renderMarketplace() {
            const t = translations[gameState.currentLang];
            const container = document.getElementById('marketplace-grid');
            
            const itemsToShow = gameState.showBlackMarket ? allMarketItems : marketplaceItems;
            
            let filtered = itemsToShow.filter(item => {
                if (gameState.showBlackMarket && !item.isBlackMarket) return false;
                if (!gameState.showBlackMarket && item.isBlackMarket) return false;
                
                const matchCategory = currentCategory === 'all' || currentCategory === 'blackmarket' || item.category === currentCategory;
                const matchSearch = item.name.toLowerCase().includes(searchTerm.toLowerCase());
                return matchCategory && matchSearch;
            });

            const sortBy = gameState.currentSort || 'default';
            if (sortBy === 'price-low') {
                filtered.sort((a, b) => a.price - b.price);
            } else if (sortBy === 'price-high') {
                filtered.sort((a, b) => b.price - a.price);
            } else if (sortBy === 'newest') {
                filtered.sort((a, b) => b.year - a.year);
            } else if (sortBy === 'boost-high') {
                filtered.sort((a, b) => b.boost - a.boost);
            }

            const bmHeader = document.getElementById('black-market-header');
            bmHeader.style.display = gameState.showBlackMarket ? 'block' : 'none';

            container.innerHTML = filtered.map(item => {
                const canAfford = gameState.money >= item.price;
                const catName = categories[item.category].name[gameState.currentLang];
                
                let compatWarning = '';
                if (item.category === 'cpu' || item.category === 'motherboard' || item.category === 'ram') {
                    const build = gameState.currentBuild;
                    
                    if (item.category === 'cpu' && build.motherboard) {
                        if (item.socket !== 'universal' && build.motherboard.socket !== 'universal' && item.socket !== build.motherboard.socket) {
                            compatWarning = `<div class="compatibility-warning">⚠️ Incompatible with your ${build.motherboard.socket} motherboard!</div>`;
                        }
                    } else if (item.category === 'motherboard' && build.cpu) {
                        if (item.socket !== 'universal' && build.cpu.socket !== 'universal' && item.socket !== build.cpu.socket) {
                            compatWarning = `<div class="compatibility-warning">⚠️ Incompatible with your ${build.cpu.socket} CPU!</div>`;
                        }
                    } else if (item.category === 'ram' && build.motherboard) {
                        if (item.ramType !== 'universal' && build.motherboard.ramType !== 'universal' && item.ramType !== build.motherboard.ramType) {
                            compatWarning = `<div class="compatibility-warning">⚠️ Requires ${build.motherboard.ramType} motherboard!</div>`;
                        }
                    }
                }
                
                let priceChangeHTML = '';
                if (!item.isBlackMarket && gameState.priceMultipliers[item.id]) {
                    const mult = gameState.priceMultipliers[item.id];
                    const change = Math.round((mult - 1) * 100);
                    const arrow = change > 0 ? '▲' : '▼';
                    const colorClass = change > 0 ? 'price-up' : 'price-down';
                    priceChangeHTML = `<div class="price-change ${colorClass}">${arrow} ${Math.abs(change)}%</div>`;
                }

                let discountHTML = '';
                if (item.isBlackMarket) {
                    const originalPrice = marketplaceItems.find(i => i.id === item.id.replace('bm_', ''))?.basePrice || item.price;
                    const discount = Math.round((1 - item.price / originalPrice) * 100);
                    discountHTML = `<div class="discount-badge">-${discount}% OFF!</div>`;
                }

                let qualityHTML = '';
                if (item.quality) {
                    const qualityClass = item.quality === 'authentic' ? 'quality-authentic' : 
                                       item.quality === 'refurbished' ? 'quality-refurbished' : 'quality-fake';
                    const qualityText = t[item.quality];
                    qualityHTML = `<div class="quality-badge ${qualityClass}">${qualityText}</div>`;
                }
                
                const itemClass = item.isBlackMarket ? 'marketplace-item black-market' : 'marketplace-item';
                const ownedClass = item.owned ? 'owned' : '';
                
                return `
                    <div class="${itemClass} ${ownedClass}">
                        <div class="item-category-badge">${catName}</div>
                        <div class="item-icon"><i class="fa ${item.icon}"></i></div>
                        <div class="item-name">${item.name}</div>
                        ${discountHTML}
                        <div class="item-price">${formatMoney(item.price)}</div>
                        ${priceChangeHTML}
                        <div class="item-boost">+${formatMoney(item.boost)}/s</div>
                        ${qualityHTML}
                        ${compatWarning}
                        ${item.owned ? 
                            `<div style="color: var(--accent-success); font-weight: 700; font-size: 0.8em;"><i class="fa fa-check"></i> ${t.owned}</div>` :
                            `<button class="btn btn-primary" onclick="buyMarketItem('${item.id}')" ${!canAfford ? 'disabled' : ''}>${t.buy}</button>`
                        }
                    </div>
                `;
            }).join('');
        }

        function renderCategories() {
            const container = document.getElementById('category-filter');
            const t = translations[gameState.currentLang];
            
            let html = `
                <button class="category-btn ${currentCategory === 'all' && !gameState.showBlackMarket ? 'active' : ''}" onclick="filterCategory('all')">${t.allItems}</button>
                <button class="category-btn ${gameState.showBlackMarket ? 'active' : ''}" onclick="toggleBlackMarket()" style="background: rgba(239, 68, 68, 0.1); border-color: #ef4444; color: #ef4444;">
                    <i class="fa fa-skull-crossbones"></i> ${t.blackMarketItems}
                </button>
            `;
            
            if (!gameState.showBlackMarket) {
                Object.keys(categories).forEach(cat => {
                    html += `<button class="category-btn ${currentCategory === cat ? 'active' : ''}" onclick="filterCategory('${cat}')">${categories[cat].name[gameState.currentLang]}</button>`;
                });
            }
            container.innerHTML = html;
        }

        function toggleBlackMarket() {
            gameState.showBlackMarket = !gameState.showBlackMarket;
            if (gameState.showBlackMarket) {
                currentCategory = 'blackmarket';
            } else {
                currentCategory = 'all';
            }
            renderCategories();
            renderMarketplace();
        }

        function renderInventory() {
            const container = document.getElementById('inventory-grid');
            const t = translations[gameState.currentLang];
            const owned = allMarketItems.filter(item => item.owned);
            
            if (owned.length === 0) {
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: var(--text-secondary); padding: 40px;">No items yet</div>';
                return;
            }

            container.innerHTML = owned.map(item => {
                let qualityBadge = '';
                if (item.quality) {
                    const qualityClass = item.quality === 'authentic' ? 'quality-authentic' : 
                                       item.quality === 'refurbished' ? 'quality-refurbished' : 'quality-fake';
                    const qualityText = t[item.quality];
                    qualityBadge = `<div class="quality-badge ${qualityClass}" style="font-size: 0.65em; padding: 2px 6px;">${qualityText}</div>`;
                }
                
                const sellPrice = item.isBlackMarket ? item.price * 0.25 : item.price * 0.5;
                
                return `
                    <div class="inventory-item">
                        <div class="item-menu">
                            <button class="menu-button" onclick="toggleMenu(event, '${item.id}')">
                                <i class="fa fa-ellipsis-vertical"></i>
                            </button>
                            <div class="menu-dropdown" id="menu-${item.id}">
                                <div class="menu-item sell-item" onclick="sellItem('${item.id}')">
                                    <i class="fa fa-dollar-sign"></i>
                                    ${t.sell} ${formatMoney(sellPrice)}
                                </div>
                            </div>
                        </div>
                        <div class="item-icon" style="font-size: 2em; height: auto; margin-bottom: 8px;"><i class="fa ${item.icon}"></i></div>
                        <div style="font-size: 0.85em; margin-top: 6px;">${item.name}</div>
                        ${qualityBadge}
                        <div style="color: var(--accent-success); font-size: 0.8em; margin-top: 4px;">+${formatMoney(item.boost)}/s</div>
                    </div>
                `
            }).join('');
        }

        function toggleMenu(event, itemId) {
            event.stopPropagation();
            const menu = document.getElementById(`menu-${itemId}`);
            
            document.querySelectorAll('.menu-dropdown').forEach(m => {
                if (m.id !== `menu-${itemId}`) {
                    m.classList.remove('active');
                }
            });
            
            menu.classList.toggle('active');
        }

        document.addEventListener('click', function() {
            document.querySelectorAll('.menu-dropdown').forEach(m => {
                m.classList.remove('active');
            });
        });

        function sellItem(id) {
            const item = allMarketItems.find(i => i.id === id);
            const t = translations[gameState.currentLang];
            
            if (!item || !item.owned) return;
            
            const sellPrice = item.isBlackMarket ? item.price * 0.25 : item.price * 0.5;
            
            item.owned = false;
            delete gameState.inventory[id];
            gameState.incomePerSecond -= item.boost;
            gameState.money += sellPrice;
            
            if (item.isBlackMarket) {
                item.quality = null;
            }
            
            renderInventory();
            renderMarketplace();
            updateUI();
            saveGame();
        }

        document.getElementById('search-box').addEventListener('input', function(e) {
            searchTerm = e.target.value;
            renderMarketplace();
        });

        document.getElementById('sort-select').addEventListener('change', function(e) {
            gameState.currentSort = e.target.value;
            renderMarketplace();
        });

        function filterCategory(cat) {
            gameState.showBlackMarket = false;
            currentCategory = cat;
            renderCategories();
            renderMarketplace();
        }

        function buyUpgrade(id) {
            const upgrade = upgrades.find(u => u.id === id);
            const level = gameState.upgrades[id] || 0;
            const cost = upgrade.cost * Math.pow(1.5, level);
            
            if (gameState.money >= cost) {
                gameState.money -= cost;
                gameState.upgrades[id] = level + 1;
                gameState.incomePerClick += upgrade.boost;
                renderUpgrades();
                updateUI();
                saveGame();
            }
        }

        function hireWorker(id) {
            const worker = workers.find(w => w.id === id);
            const count = gameState.workers[id] || 0;
            const cost = worker.cost * Math.pow(1.15, count);
            
            if (gameState.money >= cost) {
                gameState.money -= cost;
                gameState.workers[id] = count + 1;
                gameState.incomePerSecond += worker.income;
                renderWorkers();
                updateUI();
                saveGame();
            }
        }

        function unlockJob(id) {
            const job = jobs.find(j => j.id === id);
            
            if (gameState.money >= job.cost && !gameState.jobs[id]) {
                gameState.money -= job.cost;
                gameState.jobs[id] = true;
                gameState.incomePerClick += job.unlock;
                renderJobs();
                updateUI();
                saveGame();
            }
        }

        function buyMarketItem(id) {
            const item = allMarketItems.find(i => i.id === id);
            const t = translations[gameState.currentLang];
            
            if (gameState.money >= item.price && !item.owned) {
                gameState.money -= item.price;
                item.owned = true;
                playPurchaseSound();
                
                if (item.isBlackMarket) {
                    const roll = Math.random();
                    
                    if (roll < 0.3) {
                        item.quality = 'authentic';
                        item.boost = item.baseBoost;
                        showToast('success', 'AUTHENTIC', `${item.name} - Genuine! +${formatMoney(item.boost)}/s`);
                    } else if (roll < 0.8) {
                        item.quality = 'refurbished';
                        item.boost = item.baseBoost * 0.5;
                        item.watts = item.watts * 1.3; // More power hungry
                        showToast(
                            'warning', 'REFURBISHED', `${item.name} - 50% performance, +30% power`
                        );
                    } else {
                        item.quality = 'fake';
                        const scamType = Math.random();
                        
                        if (scamType < 0.5) {
                            item.owned = false;
                            item.boost = 0;
                            showToast(
                                'error', 'FAKE - EXPLODED', `${item.name} destroyed! Lost -${formatMoney(item.price)}`
                            );
                        } else {
                            item.boost = 0;
                            item.watts = item.watts * 10; // 10x power consumption!
                            showToast(
                                'error', 'SHORT CIRCUIT', `${item.name} - 10x power draw!`
                            );
                        }
                    }
                }
                
                gameState.inventory[id] = true;
                if (item.quality !== 'fake' || Math.random() >= 0.5) {
                    gameState.incomePerSecond += item.boost;
                }
                
                const issues = checkCompatibility();
                if (issues.length > 0 && issues.some(i => i.type === 'critical')) {
                    const criticalIssues = issues.filter(i => i.type === 'critical');
                    setTimeout(() => {
                        showToast('error', 'INCOMPATIBLE', `${criticalIssues[0].message} Penalty: -$${gameState.incompatibilityPenalty}/s`);
                    }, 500);
                }
                
                renderMarketplace();
                renderInventory();
                updateUI();
                saveGame();
            }
        }

        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const target = this.dataset.tab;
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                document.getElementById(target).classList.add('active');
            });
        });

        setInterval(() => {
            updateHeatSystem(0.1);
            
            checkDisasters();
            
            checkCompatibility();
            
            updateAdvancedSystems(0.1);
            
            const ocMultiplier = gameState.isOverclocked ? gameState.overclockMultiplier : 1;
            const effectiveIncome = gameState.incomePerSecond * ocMultiplier * gameState.efficiency;
            
            if (effectiveIncome > 0) {
                gameState.money += effectiveIncome / 10;
            }
            
            if (gameState.incompatibilityPenalty > 0) {
                gameState.money -= gameState.incompatibilityPenalty / 10;
            }
            
            updateUI();
        }, 100);

        setInterval(() => {
            updateMarketPrices();
            if (!gameState.showBlackMarket) {
                renderMarketplace();
            }
        }, 30000);

        setInterval(saveGame, 5000);

        function renderAll() {
            renderUpgrades();
            renderWorkers();
            renderJobs();
            renderTopUp();
            renderCategories();
            renderMarketplace();
            renderInventory();
            updateUI();
        }

        loadGame();
        updateLanguage();
        updateNewsTicker({ type: 'normal', text: 'Market opens! Welcome to PC Builder Tycoon' });
        renderAll();

        gameState.taxRate = 0.15;
        gameState.lastReset = localStorage.getItem('lastReset') || 0;
        gameState.resetBonus = false;

        function performReset() {
            const modal = document.createElement('div');
            modal.className = 'policy-modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="policy-content" style="max-width: 500px; text-align: center;">
                    <h1 style="color: #ef4444; margin-bottom: 20px;">⚠️ RESET OPTIONS</h1>
                    <p style="margin-bottom: 30px;">Choose your action:</p>
                    
                    <button class="btn-reset" style="margin-bottom: 15px;" onclick="doGameReset()">
                        <i class="fa fa-rotate-right"></i> RESET GAME
                        <div style="font-size: 0.8em; opacity: 0.8;">Clear progress, 0.0001% lottery chance</div>
                    </button>
                    
                    <button class="btn-reset" style="background: linear-gradient(135deg, #6b7280, #4b5563);" onclick="quitForever()">
                        <i class="fa fa-door-open"></i> QUIT FOREVER
                        <div style="font-size: 0.8em; opacity: 0.8;">Tired of this game? Leave permanently</div>
                    </button>
                    
                    <button class="btn" style="margin-top: 20px; width: 100%;" onclick="this.closest('.policy-modal').remove()">
                        Cancel
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function doGameReset() {
            const now = Date.now();
            const weekMs = 7 * 24 * 60 * 60 * 1000;
            
            if (now - gameState.lastReset < weekMs) {
                const remaining = Math.ceil((weekMs - (now - gameState.lastReset)) / (24 * 60 * 60 * 1000));
                showToast('error', 'RESET COOLDOWN', `Reset available in ${remaining} days`);
                return;
            }
            
            if (!confirm('Reset all progress? This cannot be undone!')) return;
            
            localStorage.removeItem('pcTycoonSave');
            gameState.lastReset = now;
            localStorage.setItem('lastReset', now);
            
            const luckyRoll = Math.random();
            if (luckyRoll < 0.000001) {
                showToast('success', 'JACKPOT!', 'You won the 0.0001% lottery! Starting with premium gear!');
                setTimeout(() => {
                    const gtx5060 = allMarketItems.find(i => i.name.includes('RTX 4090'));
                    const ssd2tb = allMarketItems.find(i => i.name.includes('2TB') && i.category === 'storage');
                    const ram128 = allMarketItems.find(i => i.name.includes('64GB') && i.category === 'ram');
                    
                    if (gtx5060) { gtx5060.owned = true; gameState.inventory[gtx5060.id] = true; gameState.incomePerSecond += gtx5060.boost; }
                    if (ssd2tb) { ssd2tb.owned = true; gameState.inventory[ssd2tb.id] = true; gameState.incomePerSecond += ssd2tb.boost; }
                    if (ram128) { ram128.owned = true; gameState.inventory[ram128.id] = true; gameState.incomePerSecond += ram128.boost; }
                    
                    renderAll();
                }, 100);
            }
            
            location.reload();
        }

        function quitForever() {
            if (!confirm('Are you sure you want to quit FOREVER? This will close the game and mark you as permanently tired of it.')) return;
            
            localStorage.setItem('pcTycoonQuit', 'true');
            localStorage.setItem('quitReason', 'Player chose to quit forever - tired of game');
            localStorage.setItem('quitTimestamp', Date.now());
            
            document.body.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #1a1a1a, #2a2a2a); color: white; text-align: center; font-family: Inter, sans-serif;">
                    <div style="max-width: 600px; padding: 40px;">
                        <h1 style="font-size: 3em; margin-bottom: 20px; color: #3b82f6;">👋 Goodbye!</h1>
                        <p style="font-size: 1.2em; color: #9ca3af; margin-bottom: 30px;">
                            Thank you for playing PC Builder Tycoon.<br>
                            We understand you're tired of the game.
                        </p>
                        <p style="font-size: 0.9em; color: #6b7280;">
                            This window will close in <span id="countdown">5</span> seconds...<br>
                            <small>Or you can close it manually</small>
                        </p>
                        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #404040;">
                            <small style="color: #6b7280;">
                                Clear browser data to play again<br>
                                Your feedback: Quit at ${formatMoney(gameState.money)} | Level ${gameState.level}
                            </small>
                        </div>
                    </div>
                </div>
            `;
            
            let countdown = 5;
            const interval = setInterval(() => {
                countdown--;
                const el = document.getElementById('countdown');
                if (el) el.textContent = countdown;
                if (countdown <= 0) {
                    clearInterval(interval);
                    window.close();
                    setTimeout(() => {
                        window.location.href = 'about:blank';
                    }, 100);
                }
            }, 1000);
        }

        const originalUpdateHeatSystem = updateHeatSystem;
        updateHeatSystem = function(deltaTime) {
            const result = originalUpdateHeatSystem(deltaTime);
            const taxAmount = gameState.incomePerSecond * gameState.taxRate / 10;
            gameState.money -= taxAmount * deltaTime;
            const taxEl = document.getElementById('tax-amount');
            if (taxEl) taxEl.textContent = '-' + formatMoney(taxAmount) + '/s';
            return result;
        };

        setInterval(() => {
            const now = Date.now();
            const weekMs = 7 * 24 * 60 * 60 * 1000;
            const resetAvailable = (now - gameState.lastReset) >= weekMs;
            
            const resetBtn = document.getElementById('reset-btn');
            const resetCooldown = document.getElementById('reset-cooldown');
            
            if (resetBtn) resetBtn.disabled = !resetAvailable;
            
            if (resetCooldown) {
                if (!resetAvailable) {
                    const remaining = Math.ceil((weekMs - (now - gameState.lastReset)) / (24 * 60 * 60 * 1000));
                    resetCooldown.textContent = `${remaining}d cooldown`;
                    resetCooldown.style.color = '#f59e0b';
                } else {
                    resetCooldown.textContent = 'Available';
                    resetCooldown.style.color = '#10b981';
                }
            }
        }, 1000);

        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;

        const tooltipEl = document.getElementById('reset-cooldown');
        
        tooltipEl.addEventListener('mousedown', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);

        function dragStart(e) {
            initialX = e.clientX - tooltipEl.offsetLeft;
            initialY = e.clientY - tooltipEl.offsetTop;
            
            if (e.target === tooltipEl) {
                isDragging = true;
            }
        }

        function drag(e) {
            if (isDragging) {
                e.preventDefault();
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
                
                tooltipEl.style.left = currentX + 'px';
                tooltipEl.style.top = currentY + 'px';
                tooltipEl.style.right = 'auto';
            }
        }

        function dragEnd() {
            isDragging = false;
        }
    </script>
</body>
</html>
